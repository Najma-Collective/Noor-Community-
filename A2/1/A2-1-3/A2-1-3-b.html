<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slides: A Day in the City</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Questrial&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="../../../CSS-slides.css" />
<style>
:root {
        --primary-sage: #7a8471;
        --secondary-sage: #9caf88;
        --tertiary-sage: #b8c5a6;
        --warm-cream: #f8f6f0;
        --soft-white: #fefcf7;
        --forest-shadow: #5a6b52;
        --primary-forest: #3f4d39;
        --ink: #2f3a2b;
        --ink-muted: #5a6b52;
        --border-sage: rgba(122, 132, 113, 0.2);
        --hover-sage: rgba(156, 175, 136, 0.15);
        --deep-forest: #3e4a3a;
        --font-display: "Questrial", system-ui, sans-serif;
        --font-body: "Nunito", system-ui, sans-serif;
        --font-size-adjustment: 0pt;
        --step--1: calc(
          clamp(0.9rem, 0.85rem + 0.1vw, 0.95rem) + var(--font-size-adjustment)
        );
        --step-0: calc(
          clamp(1rem, 0.95rem + 0.2vw, 1.1rem) + var(--font-size-adjustment)
        );
        --step-1: calc(
          clamp(1.125rem, 1.05rem + 0.35vw, 1.35rem) +
            var(--font-size-adjustment)
        );
        --step-2: calc(
          clamp(1.35rem, 1.2rem + 0.6vw, 1.7rem) + var(--font-size-adjustment)
        );
        --step-3: calc(
          clamp(1.8rem, 1.5rem + 1vw, 2.3rem) + var(--font-size-adjustment)
        );
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-7: 2rem;
        --radius: 16px;
        --radius-lg: 20px;
        --shadow-1:
          0 1px 2px rgba(34, 41, 32, 0.05), 0 2px 8px rgba(34, 41, 32, 0.06);
        --shadow-2:
          0 6px 24px rgba(34, 41, 32, 0.08), 0 16px 36px rgba(34, 41, 32, 0.08);
        --shadow-glow: 0 0 45px 10px
          color-mix(in srgb, var(--secondary-sage) 15%, transparent);
        --toolbar-h: 72px;
        --workspace-pad: 24px;
        --stage-pad: clamp(32px, 5vw, 64px);
        --stage-radius: 18px;
        --slide-aspect-w: 16;
        --slide-aspect-h: 9;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        min-height: 100dvh;
        color: var(--forest-shadow);
        background: linear-gradient(135deg, #f8f6f0 0%, #f5f3ed 100%);
        font-family: var(--font-body);
        font-size: var(--step-0);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        overflow: auto;
      }
      .deck-app {
        display: grid;
        grid-template-rows: var(--toolbar-h) 1fr;
        min-height: 100dvh;
      }
      .deck-toolbar {
        position: sticky;
        top: 0;
        z-index: 50;
        height: var(--toolbar-h);
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: var(--space-4);
        padding: 0 max(24px, 4vw);
        background: color-mix(in srgb, var(--soft-white) 85%, transparent);
        border-bottom: 1px solid var(--border-sage);
        box-shadow: 0 8px 20px rgba(34, 41, 32, 0.05);
        backdrop-filter: blur(8px) saturate(1.1);
      }
      .toolbar-brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-family: var(--font-display);
        font-size: calc(1.05rem + var(--font-size-adjustment));
        color: var(--forest-shadow);
      }
      .toolbar-brand span {
        letter-spacing: 0.04em;
        text-transform: uppercase;
        font-weight: 600;
      }
      .slide-counter {
        font-family: var(--font-display);
        color: var(--ink-muted);
        font-weight: 600;
        letter-spacing: 0.06em;
        justify-self: center;
      }
      .toolbar-actions {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .toolbar-btn {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.15rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        background: var(--primary-sage);
        color: #fff;
        box-shadow: var(--shadow-1);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      .toolbar-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .toolbar-btn.secondary {
        background: var(--primary-forest);
      }
      .toolbar-btn.ghost {
        background: var(--soft-white);
        color: var(--primary-forest);
        border: 1px solid var(--border-sage);
        box-shadow: none;
      }
      .toolbar-btn.ghost:hover {
        box-shadow: var(--shadow-1);
      }
      .toolbar-select {
        border-radius: 999px;
        border: 1px solid var(--border-sage);
        background: #fff;
        padding: 0.45rem 1rem;
        font-weight: 600;
        letter-spacing: 0.02em;
        color: var(--primary-forest);
        cursor: pointer;
      }
      .toolbar-select:focus {
        outline: 2px solid var(--primary-sage);
        outline-offset: 2px;
      }
      .highlight-controls {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.75rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.65);
        box-shadow: var(--shadow-1);
      }
      .highlight-controls i {
        color: var(--primary-forest);
      }
      .text-highlight {
        background-color: var(--highlight-color, rgba(249, 226, 125, 0.85));
        padding: 0.05em 0.15em;
        border-radius: 0.35em;
        box-decoration-break: clone;
        -webkit-box-decoration-break: clone;
        transition: background-color 200ms ease;
      }
      .deck-workspace {
        height: calc(100dvh - var(--toolbar-h));
        padding: var(--workspace-pad);
        display: grid;
        place-items: center;
        overflow: hidden;
        background:
          radial-gradient(
            900px 600px at 20% 0%,
            rgba(156, 175, 136, 0.08) 0%,
            transparent 70%
          ),
          radial-gradient(
            800px 700px at 80% 100%,
            rgba(90, 107, 82, 0.06) 0%,
            transparent 70%
          );
      }
      .stage-viewport {
        position: relative;
        display: grid;
        place-items: center;
      }
      .slide-stage {
        position: relative;
        border-radius: var(--stage-radius);
        background-color: var(--soft-white);
        box-shadow:
          var(--shadow-glow),
          0 24px 60px rgba(34, 41, 32, 0.1);
        aspect-ratio: var(--slide-aspect-w) / var(--slide-aspect-h);
        width: min(
          calc(
            (100dvh - var(--toolbar-h) - (var(--workspace-pad) * 2)) *
              (var(--slide-aspect-w) / var(--slide-aspect-h))
          ),
          calc(100vw - (var(--workspace-pad) * 2))
        );
        max-width: 100%;
        overflow: hidden auto;
        outline: 1px solid var(--border-sage);
        transition: opacity 300ms ease-in-out;
      }
      .slide-stage.hidden {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }
      .slide-stage.full-width-bg {
        background: transparent;
        outline: none;
        box-shadow: none;
      }
      .bg-media {
        position: absolute;
        inset: 0;
        overflow: hidden;
      }
      .bg-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        filter: brightness(0.92);
        display: block;
      }
      .bg-media.remote-image-fallback {
        background: linear-gradient(
          135deg,
          rgba(16, 28, 21, 0.85) 0%,
          rgba(16, 28, 21, 0.6) 65%,
          rgba(16, 28, 21, 0.45) 100%
        );
      }
      .bg-media.remote-image-fallback img {
        display: none;
      }
      .img-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(14, 30, 20, 0.72) 0%,
          rgba(14, 30, 20, 0.4) 45%,
          rgba(14, 30, 20, 0.2) 70%,
          transparent 100%
        );
        z-index: 1;
      }
      .slide-inner {
        position: absolute;
        inset: 0;
        padding: var(--stage-pad);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 1.25rem;
        overflow-y: auto;
        scrollbar-gutter: stable both-edges;
      }
      .bg-content {
        position: relative;
        z-index: 2;
        padding: var(--stage-pad);
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
        align-items: flex-start;
      }
      .bg-content.centered {
        align-items: center;
        text-align: center;
        justify-content: center;
      }
      .context-image {
        position: relative;
        display: grid;
        place-items: center;
        border-radius: var(--radius);
        overflow: hidden;
        min-height: 220px;
        box-shadow: var(--shadow-1);
        background: rgba(248, 246, 240, 0.65);
      }
      .context-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .context-image.remote-image-fallback {
        background: linear-gradient(
            135deg,
            rgba(156, 175, 136, 0.45) 0%,
            rgba(90, 107, 82, 0.75) 100%
          ),
          rgba(28, 45, 33, 0.85);
        color: rgba(255, 255, 255, 0.82);
        text-align: center;
        padding: 1.5rem;
      }
      .context-image.remote-image-fallback::after {
        content: "Image preview unavailable";
        font-size: 0.85rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }
      .context-image.remote-image-fallback img {
        display: none;
      }
      .overlay-card {
        background: color-mix(
          in srgb,
          rgba(16, 28, 21, 0.72) 65%,
          rgba(248, 246, 240, 0.35) 35%
        );
        border: 1px solid rgba(253, 251, 245, 0.35);
        border-radius: calc(var(--radius-lg) + 8px);
        padding: clamp(28px, 5vw, 48px);
        box-shadow: 0 24px 60px rgba(8, 16, 12, 0.4);
        backdrop-filter: blur(14px) saturate(125%);
        color: #fdfbf5;
        max-width: min(600px, 80%);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .overlay-card.centered {
        margin: 0 auto;
        text-align: center;
        align-items: center;
      }
      .overlay-card h1,
      .overlay-card h2,
      .overlay-card p,
      .overlay-card .pill,
      .overlay-card .deck-subtitle {
        color: #fdfbf5;
      }
      .overlay-card .deck-subtitle {
        font-size: var(--step-1);
        margin: 0;
        color: rgba(253, 251, 245, 0.85);
      }
      .overlay-pill {
        background: rgba(253, 251, 245, 0.22) !important;
        color: #fdfbf5 !important;
        box-shadow: inset 0 0 0 1px rgba(253, 251, 245, 0.28);
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.85rem;
        border-radius: 999px;
        background: rgba(122, 132, 113, 0.16);
        font-size: calc(0.85rem + var(--font-size-adjustment));
        letter-spacing: 0.05em;
        text-transform: uppercase;
        font-weight: 700;
        color: var(--deep-forest);
        white-space: nowrap;
        width: fit-content;
      }
      h1,
      h2,
      h3 {
        font-family: var(--font-display);
        margin: 0;
        color: var(--ink);
      }
      h1 {
        font-size: var(--step-3);
      }
      h2 {
        font-size: var(--step-2);
      }
      h3 {
        font-size: var(--step-1);
      }
      p {
        margin: 0;
      }
      ul,
      ol {
        margin: 0;
        padding-left: 1.25rem;
      }
      .card {
        background: var(--soft-white);
        padding: clamp(1.35rem, 3vw, 2rem);
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.2);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
      }
      .card.dense {
        gap: 0.65rem;
        padding: clamp(1.1rem, 2.5vw, 1.65rem);
      }
      .two-column-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.2rem;
        width: 100%;
      }
      .column-card {
        background: rgba(248, 246, 240, 0.85);
        border-radius: var(--radius);
        padding: 1.1rem 1.3rem;
        border: 1px solid rgba(122, 132, 113, 0.18);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.65rem;
      }
      .instruction-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
      }
      .instruction-list li {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
      }
      .instruction-list i {
        color: var(--primary-sage);
        margin-top: 0.2em;
      }
      .activity-actions {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        margin-top: 0.5rem;
      }
      .activity-btn {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.1rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        background: var(--primary-sage);
        color: #fff;
        box-shadow: var(--shadow-1);
      }
      .activity-btn.secondary {
        background: rgba(122, 132, 113, 0.16);
        color: var(--deep-forest);
      }
      .activity-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .feedback-msg {
        min-height: 1.5rem;
        font-weight: 600;
        letter-spacing: 0.02em;
      }
      .feedback-msg.success {
        color: #2e7d32;
      }
      .feedback-msg.error {
        color: #c62828;
      }
      .unscramble-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding-left: 0;
        list-style: none;
      }
      .unscramble-list li {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      .unscramble-input {
        width: 100%;
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
        font-weight: 600;
        background: var(--soft-white);
        transition:
          border 0.2s ease,
          background 0.2s ease;
      }
      .unscramble-input.correct {
        border-color: #2e7d32;
        background: rgba(46, 125, 50, 0.12);
      }
      .unscramble-input.incorrect {
        border-color: #c62828;
        background: rgba(198, 40, 40, 0.12);
      }
      .matching-stack {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .matching-option {
        display: grid;
        grid-template-columns: 1fr minmax(180px, 250px);
        gap: 0.9rem;
        align-items: center;
        padding: 0.75rem 0.85rem;
        border-radius: 14px;
        border: 1px solid rgba(122, 132, 113, 0.16);
        background: color-mix(in srgb, var(--warm-cream) 60%, transparent);
        transition:
          border 0.2s ease,
          background 0.2s ease;
      }
      .matching-option select {
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-weight: 600;
        font-size: var(--step--1);
        background: var(--soft-white);
        color: var(--forest-shadow);
      }
      .quiz-card {
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.2);
        padding: 1rem 1.1rem;
        background: rgba(254, 252, 247, 0.95);
        display: flex;
        flex-direction: column;
        gap: 0.65rem;
      }
      .quiz-options {
        display: grid;
        gap: 0.45rem;
      }
      .quiz-option {
        display: flex;
        align-items: flex-start;
        gap: 0.6rem;
        padding: 0.45rem 0.6rem;
        border-radius: 12px;
        background: rgba(250, 250, 248, 0.9);
        border: 1px solid transparent;
        cursor: pointer;
      }
      .quiz-option input[type="radio"] {
        margin-top: 0.25em;
      }
      .quiz-option.correct {
        border-color: #2e7d32;
        background: rgba(46, 125, 50, 0.12);
      }
      .quiz-option.incorrect {
        border-color: #c62828;
        background: rgba(198, 40, 40, 0.12);
      }
      .drop-categorization {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      .token-bank {
        display: flex;
        flex-wrap: wrap;
        gap: 0.65rem;
        padding: 1rem 1.1rem;
        border-radius: var(--radius-lg);
        background: linear-gradient(
          135deg,
          rgba(248, 246, 240, 0.92),
          rgba(236, 231, 220, 0.75)
        );
        border: 1px dashed rgba(122, 132, 113, 0.28);
        margin-bottom: 1rem;
      }
      .click-token {
        padding: 0.55rem 1rem;
        border-radius: 999px;
        background: var(--soft-white);
        border: 1px solid rgba(122, 132, 113, 0.35);
        box-shadow: var(--shadow-1);
        cursor: pointer;
        font-weight: 600;
        font-size: var(--step--1);
        user-select: none;
        transition: all 0.2s ease;
      }
      .click-token.used {
        opacity: 0.4;
        pointer-events: none;
      }
      .click-token.selected {
        background: var(--secondary-sage);
        color: white;
        transform: scale(1.05);
      }
      .category-column {
        background: rgba(248, 246, 240, 0.85);
        border-radius: var(--radius);
        padding: 1rem;
        border: 1px solid rgba(122, 132, 113, 0.18);
      }
      .drop-zone {
        min-height: 120px;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 12px;
        border: 2px dashed rgba(122, 132, 113, 0.35);
        background: rgba(254, 252, 247, 0.75);
        transition: all 0.2s ease;
      }
      .drop-zone.active {
        border-color: var(--primary-sage);
        background: rgba(156, 175, 136, 0.22);
      }
      .drop-zone .click-token {
        cursor: grab;
      }
      .category-column.correct {
        border-color: #2e7d32;
      }
      .category-column.incorrect {
        border-color: #c62828;
      }
      .stress-sentence {
        font-size: var(--step-1);
        font-weight: 500;
        line-height: 1.8;
        margin-bottom: 0.5rem;
      }
      .stress-word {
        padding: 0.2rem 0.4rem;
        border-radius: 8px;
        margin: 0 0.1rem;
        cursor: pointer;
        transition: background 0.2s ease;
        border: 1px solid transparent;
        display: inline-block;
      }
      .stress-word:hover {
        background: var(--hover-sage);
      }
      .stress-word.marked {
        background: var(--tertiary-sage);
        color: var(--ink);
        border-color: var(--primary-sage);
      }
      .stress-word.correct {
        background: rgba(46, 125, 50, 0.2);
        border-color: #2e7d32;
      }
      .stress-word.incorrect {
        background: rgba(198, 40, 40, 0.2);
        border-color: #c62828;
      }
      .slide-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: rgba(254, 252, 247, 0.85);
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: grid;
        place-items: center;
        box-shadow: var(--shadow-2);
        cursor: pointer;
        z-index: 10;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
      }
      .slide-nav:hover {
        transform: translateY(-50%) scale(1.05);
        box-shadow: 0 12px 32px rgba(34, 41, 32, 0.15);
      }
      .slide-nav-prev {
        left: -24px;
      }
      .slide-nav-next {
        right: -24px;
      }
      .blank-slide {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        height: 100%;
      }
      .blank-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
      }
      .blank-canvas {
        flex: 1;
        border-radius: var(--radius-lg);
        border: 1px dashed rgba(122, 132, 113, 0.35);
        background: rgba(254, 252, 247, 0.8);
        padding: 1.5rem;
        position: relative;
        overflow: hidden auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        min-height: 320px;
      }
      .blank-hint {
        font-size: var(--step--1);
        color: var(--ink-muted);
      }
      .textbox {
        position: absolute;
        top: 0;
        left: 0;
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.35);
        box-shadow: var(--shadow-1);
        background: var(--soft-white);
        width: clamp(240px, 35%, 420px);
        min-height: 140px;
        display: flex;
        flex-direction: column;
        cursor: move;
        touch-action: none;
      }
      .textbox-handle {
        padding: 0.5rem 0.75rem;
        background: rgba(122, 132, 113, 0.16);
        border-bottom: 1px solid rgba(122, 132, 113, 0.2);
        font-weight: 700;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        font-size: 0.75rem;
        cursor: grab;
        border-top-left-radius: var(--radius);
        border-top-right-radius: var(--radius);
      }
      .textbox-body {
        flex: 1;
        padding: 0.75rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
        line-height: 1.5;
        outline: none;
        cursor: text;
        overflow: auto;
      }
      .textbox-body:focus {
        box-shadow: inset 0 0 0 2px rgba(122, 132, 113, 0.35);
      }
      .textbox-remove {
        position: absolute;
        top: 0.35rem;
        right: 0.35rem;
        border: none;
        background: rgba(254, 252, 247, 0.8);
        color: var(--forest-shadow);
        border-radius: 50%;
        width: 28px;
        height: 28px;
        display: grid;
        place-items: center;
        cursor: pointer;
        box-shadow: var(--shadow-1);
      }
      .textbox-remove:hover {
        color: #c62828;
      }
      .mindmap {
        border-radius: var(--radius-lg);
        border: 1px solid rgba(122, 132, 113, 0.35);
        background: linear-gradient(
          135deg,
          rgba(248, 246, 240, 0.92),
          rgba(236, 231, 220, 0.75)
        );
        box-shadow: var(--shadow-1);
        padding: clamp(1.2rem, 3vw, 1.8rem);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .mindmap-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }
      .mindmap-title {
        font-family: var(--font-display);
        font-size: var(--step-1);
        margin: 0;
        color: var(--deep-forest);
      }
      .mindmap-remove {
        border: none;
        background: transparent;
        color: var(--forest-shadow);
        font-weight: 700;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
      }
      .mindmap-remove:hover {
        color: #c62828;
      }
      .mindmap-center {
        align-self: center;
        min-width: 180px;
        padding: 0.9rem 1.1rem;
        border-radius: 999px;
        background: var(--primary-sage);
        color: #fff;
        font-weight: 700;
        text-align: center;
        font-family: var(--font-display);
        letter-spacing: 0.03em;
        outline: none;
      }
      .mindmap-center:focus {
        box-shadow: 0 0 0 3px rgba(156, 175, 136, 0.35);
      }
      .mindmap-branches {
        display: grid;
        gap: 0.75rem;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }
      .mindmap-branch {
        position: relative;
        padding: 0.75rem 0.85rem;
        border-radius: var(--radius);
        background: rgba(254, 252, 247, 0.95);
        border: 1px solid rgba(122, 132, 113, 0.2);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
      }
      .mindmap-branch textarea {
        width: 100%;
        border: none;
        background: transparent;
        font-family: var(--font-body);
        font-size: var(--step--1);
        line-height: 1.5;
        resize: vertical;
        min-height: 64px;
      }
      .branch-remove {
        align-self: flex-end;
        border: none;
        background: transparent;
        color: var(--forest-shadow);
        cursor: pointer;
        font-weight: 600;
        font-size: 0.85rem;
      }
      .branch-remove:hover {
        color: #c62828;
      }
      .mindmap-form {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
      }
      .mindmap-form input {
        flex: 1 1 220px;
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
      }
      .mindmap-form button {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.1rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        background: var(--secondary-sage);
        color: var(--deep-forest);
        box-shadow: var(--shadow-1);
      }
      .mindmap-form button:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
      }
:root {
        --primary-sage: #7a8471;
        --secondary-sage: #9caf88;
        --tertiary-sage: #b8c5a6;
        --warm-cream: #f8f6f0;
        --soft-white: #fefcf7;
        --forest-shadow: #5a6b52;
        --ink: #2f3a2b;
        --ink-muted: #5a6b52;
        --border-sage: rgba(122, 132, 113, 0.2);
        --hover-sage: rgba(156, 175, 136, 0.15);
        --deep-forest: #3e4a3a;
        --font-display: "Questrial", system-ui, sans-serif;
        --font-body: "Nunito", system-ui, sans-serif;
        --font-size-adjustment: 0pt;
        --step--1: calc(
          clamp(0.9rem, 0.85rem + 0.1vw, 0.95rem) + var(--font-size-adjustment)
        );
        --step-0: calc(
          clamp(1rem, 0.95rem + 0.2vw, 1.1rem) + var(--font-size-adjustment)
        );
        --step-1: calc(
          clamp(1.125rem, 1.05rem + 0.35vw, 1.35rem) +
            var(--font-size-adjustment)
        );
        --step-2: calc(
          clamp(1.35rem, 1.2rem + 0.6vw, 1.7rem) + var(--font-size-adjustment)
        );
        --step-3: calc(
          clamp(1.8rem, 1.5rem + 1vw, 2.3rem) + var(--font-size-adjustment)
        );
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-7: 2rem;
        --radius: 16px;
        --radius-lg: 20px;
        --shadow-1:
          0 1px 2px rgba(34, 41, 32, 0.05), 0 2px 8px rgba(34, 41, 32, 0.06);
        --shadow-2:
          0 6px 24px rgba(34, 41, 32, 0.08), 0 16px 36px rgba(34, 41, 32, 0.08);
        --shadow-glow: 0 0 45px 10px
          color-mix(in srgb, var(--secondary-sage) 15%, transparent);
        --toolbar-h: 72px;
        --workspace-pad: 24px;
        --stage-pad: clamp(32px, 5vw, 64px);
        --stage-radius: 18px;
        --slide-aspect-w: 16;
        --slide-aspect-h: 9;
      }
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        min-height: 100dvh;
        color: var(--forest-shadow);
        background: linear-gradient(135deg, #f8f6f0 0%, #f5f3ed 100%);
        font-family: var(--font-body);
        font-size: var(--step-0);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        overflow: auto;
      }
      .deck-app {
        display: grid;
        grid-template-rows: var(--toolbar-h) 1fr;
        min-height: 100dvh;
      }
      .deck-toolbar {
        position: sticky;
        top: 0;
        z-index: 50;
        height: var(--toolbar-h);
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: var(--space-4);
        padding: 0 max(24px, 4vw);
        background: color-mix(in srgb, var(--soft-white) 85%, transparent);
        border-bottom: 1px solid var(--border-sage);
        box-shadow: 0 8px 20px rgba(34, 41, 32, 0.05);
        backdrop-filter: blur(8px) saturate(1.1);
      }
      .toolbar-brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-family: var(--font-display);
        font-size: calc(1.05rem + var(--font-size-adjustment));
        color: var(--forest-shadow);
      }
      .toolbar-brand span {
        letter-spacing: 0.04em;
        text-transform: uppercase;
        font-weight: 600;
      }
      .slide-counter {
        font-family: var(--font-display);
        color: var(--ink-muted);
        font-weight: 600;
        letter-spacing: 0.06em;
        justify-self: center;
      }
      .toolbar-actions {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .toolbar-btn {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.15rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        background: var(--primary-sage);
        color: #fff;
        box-shadow: var(--shadow-1);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      .toolbar-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .toolbar-btn.secondary {
        background: var(--primary-forest);
      }
      .toolbar-btn.ghost {
        background: var(--soft-white);
        color: var(--primary-forest);
        border: 1px solid var(--border-sage);
        box-shadow: none;
      }
      .toolbar-btn.ghost:hover {
        box-shadow: var(--shadow-1);
      }
      .toolbar-select {
        border-radius: 999px;
        border: 1px solid var(--border-sage);
        background: #fff;
        padding: 0.45rem 1rem;
        font-weight: 600;
        letter-spacing: 0.02em;
        color: var(--primary-forest);
        cursor: pointer;
      }
      .toolbar-select:focus {
        outline: 2px solid var(--primary-sage);
        outline-offset: 2px;
      }
      .highlight-controls {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.75rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.65);
        box-shadow: var(--shadow-1);
      }
      .highlight-controls i {
        color: var(--primary-forest);
      }
      .text-highlight {
        background-color: var(--highlight-color, rgba(249, 226, 125, 0.85));
        padding: 0.05em 0.15em;
        border-radius: 0.35em;
        box-decoration-break: clone;
        -webkit-box-decoration-break: clone;
        transition: background-color 200ms ease;
      }
      .deck-workspace {
        height: calc(100dvh - var(--toolbar-h));
        padding: var(--workspace-pad);
        display: grid;
        place-items: center;
        overflow: hidden;
        background:
          radial-gradient(
            900px 600px at 20% 0%,
            rgba(156, 175, 136, 0.08) 0%,
            transparent 70%
          ),
          radial-gradient(
            800px 700px at 80% 100%,
            rgba(90, 107, 82, 0.06) 0%,
            transparent 70%
          );
      }
      .stage-viewport {
        position: relative;
        display: grid;
        place-items: center;
      }
      .slide-stage {
        position: relative;
        border-radius: var(--stage-radius);
        background-color: var(--soft-white);
        box-shadow:
          var(--shadow-glow),
          0 24px 60px rgba(34, 41, 32, 0.1);
        aspect-ratio: var(--slide-aspect-w) / var(--slide-aspect-h);
        width: min(
          calc(
            (100dvh - var(--toolbar-h) - (var(--workspace-pad) * 2)) *
              (var(--slide-aspect-w) / var(--slide-aspect-h))
          ),
          calc(100vw - (var(--workspace-pad) * 2))
        );
        max-width: 100%;
        overflow: hidden auto;
        outline: 1px solid var(--border-sage);
        transition: opacity 300ms ease-in-out;
      }
      .slide-stage.hidden {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }
      .slide-stage.full-width-bg {
        background: transparent;
        outline: none;
        box-shadow: none;
      }
      .bg-media {
        position: absolute;
        inset: 0;
        overflow: hidden;
      }
      .bg-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        filter: brightness(0.92);
        display: block;
      }
      .bg-media.remote-image-fallback {
        background: linear-gradient(
          135deg,
          rgba(16, 28, 21, 0.85) 0%,
          rgba(16, 28, 21, 0.6) 65%,
          rgba(16, 28, 21, 0.45) 100%
        );
      }
      .bg-media.remote-image-fallback img {
        display: none;
      }
      .img-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(14, 30, 20, 0.72) 0%,
          rgba(14, 30, 20, 0.4) 45%,
          rgba(14, 30, 20, 0.2) 70%,
          transparent 100%
        );
        z-index: 1;
      }
      .slide-inner {
        position: absolute;
        inset: 0;
        padding: var(--stage-pad);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        gap: 1.25rem;
        overflow-y: auto;
        scrollbar-gutter: stable both-edges;
      }
      .bg-content {
        position: relative;
        z-index: 2;
        padding: var(--stage-pad);
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
        align-items: flex-start;
      }
      .bg-content.centered {
        align-items: center;
        text-align: center;
        justify-content: center;
      }
      .context-image {
        position: relative;
        display: grid;
        place-items: center;
        border-radius: var(--radius);
        overflow: hidden;
        min-height: 220px;
        box-shadow: var(--shadow-1);
        background: rgba(248, 246, 240, 0.65);
      }
      .context-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .context-image.remote-image-fallback {
        background: linear-gradient(
            135deg,
            rgba(156, 175, 136, 0.45) 0%,
            rgba(90, 107, 82, 0.75) 100%
          ),
          rgba(28, 45, 33, 0.85);
        color: rgba(255, 255, 255, 0.82);
        text-align: center;
        padding: 1.5rem;
      }
      .context-image.remote-image-fallback::after {
        content: "Image preview unavailable";
        font-size: 0.85rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }
      .context-image.remote-image-fallback img {
        display: none;
      }
      .overlay-card {
        background: color-mix(
          in srgb,
          rgba(16, 28, 21, 0.72) 65%,
          rgba(248, 246, 240, 0.35) 35%
        );
        border: 1px solid rgba(253, 251, 245, 0.35);
        border-radius: calc(var(--radius-lg) + 8px);
        padding: clamp(28px, 5vw, 48px);
        box-shadow: 0 24px 60px rgba(8, 16, 12, 0.4);
        backdrop-filter: blur(14px) saturate(125%);
        color: #fdfbf5;
        max-width: min(600px, 80%);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .overlay-card.centered {
        margin: 0 auto;
        text-align: center;
        align-items: center;
      }
      .overlay-card h1,
      .overlay-card h2,
      .overlay-card p,
      .overlay-card .pill,
      .overlay-card .deck-subtitle {
        color: #fdfbf5;
      }
      .overlay-card .deck-subtitle {
        font-size: var(--step-1);
        margin: 0;
        color: rgba(253, 251, 245, 0.85);
      }
      .overlay-pill {
        background: rgba(253, 251, 245, 0.22) !important;
        color: #fdfbf5 !important;
        box-shadow: inset 0 0 0 1px rgba(253, 251, 245, 0.28);
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.85rem;
        border-radius: 999px;
        background: rgba(122, 132, 113, 0.16);
        font-size: calc(0.85rem + var(--font-size-adjustment));
        letter-spacing: 0.05em;
        text-transform: uppercase;
        font-weight: 700;
        color: var(--deep-forest);
        white-space: nowrap;
        width: fit-content;
      }
      h1,
      h2,
      h3 {
        font-family: var(--font-display);
        margin: 0;
        color: var(--ink);
      }
      h1 {
        font-size: var(--step-3);
      }
      h2 {
        font-size: var(--step-2);
      }
      h3 {
        font-size: var(--step-1);
      }
      p {
        margin: 0;
      }
      ul,
      ol {
        margin: 0;
        padding-left: 1.25rem;
      }
      .card {
        background: var(--soft-white);
        padding: clamp(1.35rem, 3vw, 2rem);
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.2);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.9rem;
      }
      .card.dense {
        gap: 0.65rem;
        padding: clamp(1.1rem, 2.5vw, 1.65rem);
      }
      .two-column-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.2rem;
        width: 100%;
      }
      .column-card {
        background: rgba(248, 246, 240, 0.85);
        border-radius: var(--radius);
        padding: 1.1rem 1.3rem;
        border: 1px solid rgba(122, 132, 113, 0.18);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.65rem;
      }
      .instruction-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
      }
      .instruction-list li {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
      }
      .instruction-list i {
        color: var(--primary-sage);
        margin-top: 0.2em;
      }
      .activity-actions {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        margin-top: 0.5rem;
      }
      .activity-btn {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.1rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        background: var(--primary-sage);
        color: #fff;
        box-shadow: var(--shadow-1);
      }
      .activity-btn.secondary {
        background: rgba(122, 132, 113, 0.16);
        color: var(--deep-forest);
      }
      .activity-btn:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .feedback-msg {
        min-height: 1.5rem;
        font-weight: 600;
        letter-spacing: 0.02em;
      }
      .feedback-msg.success {
        color: #2e7d32;
      }
      .feedback-msg.error {
        color: #c62828;
      }
      .unscramble-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding-left: 0;
        list-style: none;
      }
      .unscramble-list li {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      .unscramble-input {
        width: 100%;
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
        font-weight: 600;
        background: var(--soft-white);
        transition:
          border 0.2s ease,
          background 0.2s ease;
      }
      .unscramble-input.correct {
        border-color: #2e7d32;
        background: rgba(46, 125, 50, 0.12);
      }
      .unscramble-input.incorrect {
        border-color: #c62828;
        background: rgba(198, 40, 40, 0.12);
      }
      .matching-stack {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .matching-option {
        display: grid;
        grid-template-columns: 1fr minmax(180px, 250px);
        gap: 0.9rem;
        align-items: center;
        padding: 0.75rem 0.85rem;
        border-radius: 14px;
        border: 1px solid rgba(122, 132, 113, 0.16);
        background: color-mix(in srgb, var(--warm-cream) 60%, transparent);
        transition:
          border 0.2s ease,
          background 0.2s ease;
      }
      .matching-option select {
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-weight: 600;
        font-size: var(--step--1);
        background: var(--soft-white);
        color: var(--forest-shadow);
      }
      .quiz-card {
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.2);
        padding: 1rem 1.1rem;
        background: rgba(254, 252, 247, 0.95);
        display: flex;
        flex-direction: column;
        gap: 0.65rem;
      }
      .quiz-options {
        display: grid;
        gap: 0.45rem;
      }
      .quiz-option {
        display: flex;
        align-items: flex-start;
        gap: 0.6rem;
        padding: 0.45rem 0.6rem;
        border-radius: 12px;
        background: rgba(250, 250, 248, 0.9);
        border: 1px solid transparent;
        cursor: pointer;
      }
      .quiz-option input[type="radio"] {
        margin-top: 0.25em;
      }
      .quiz-option.correct {
        border-color: #2e7d32;
        background: rgba(46, 125, 50, 0.12);
      }
      .quiz-option.incorrect {
        border-color: #c62828;
        background: rgba(198, 40, 40, 0.12);
      }
      .drop-categorization {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      .token-bank {
        display: flex;
        flex-wrap: wrap;
        gap: 0.65rem;
        padding: 1rem 1.1rem;
        border-radius: var(--radius-lg);
        background: linear-gradient(
          135deg,
          rgba(248, 246, 240, 0.92),
          rgba(236, 231, 220, 0.75)
        );
        border: 1px dashed rgba(122, 132, 113, 0.28);
        margin-bottom: 1rem;
      }
      .click-token {
        padding: 0.55rem 1rem;
        border-radius: 999px;
        background: var(--soft-white);
        border: 1px solid rgba(122, 132, 113, 0.35);
        box-shadow: var(--shadow-1);
        cursor: pointer;
        font-weight: 600;
        font-size: var(--step--1);
        user-select: none;
        transition: all 0.2s ease;
      }
      .click-token.used {
        opacity: 0.4;
        pointer-events: none;
      }
      .click-token.selected {
        background: var(--secondary-sage);
        color: white;
        transform: scale(1.05);
      }
      .category-column {
        background: rgba(248, 246, 240, 0.85);
        border-radius: var(--radius);
        padding: 1rem;
        border: 1px solid rgba(122, 132, 113, 0.18);
      }
      .drop-zone {
        min-height: 120px;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 12px;
        border: 2px dashed rgba(122, 132, 113, 0.35);
        background: rgba(254, 252, 247, 0.75);
        transition: all 0.2s ease;
      }
      .drop-zone.active {
        border-color: var(--primary-sage);
        background: rgba(156, 175, 136, 0.22);
      }
      .drop-zone .click-token {
        cursor: grab;
      }
      .category-column.correct {
        border-color: #2e7d32;
      }
      .category-column.incorrect {
        border-color: #c62828;
      }
      .stress-sentence {
        font-size: var(--step-1);
        font-weight: 500;
        line-height: 1.8;
        margin-bottom: 0.5rem;
      }
      .stress-word {
        padding: 0.2rem 0.4rem;
        border-radius: 8px;
        margin: 0 0.1rem;
        cursor: pointer;
        transition: background 0.2s ease;
        border: 1px solid transparent;
        display: inline-block;
      }
      .stress-word:hover {
        background: var(--hover-sage);
      }
      .stress-word.marked {
        background: var(--tertiary-sage);
        color: var(--ink);
        border-color: var(--primary-sage);
      }
      .stress-word.correct {
        background: rgba(46, 125, 50, 0.2);
        border-color: #2e7d32;
      }
      .stress-word.incorrect {
        background: rgba(198, 40, 40, 0.2);
        border-color: #c62828;
      }
      .slide-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background: rgba(254, 252, 247, 0.85);
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: grid;
        place-items: center;
        box-shadow: var(--shadow-2);
        cursor: pointer;
        z-index: 10;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
      }
      .slide-nav:hover {
        transform: translateY(-50%) scale(1.05);
        box-shadow: 0 12px 32px rgba(34, 41, 32, 0.15);
      }
      .slide-nav-prev {
        left: -24px;
      }
      .slide-nav-next {
        right: -24px;
      }
      .blank-slide {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        height: 100%;
      }
      .blank-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
      }
      .blank-canvas {
        flex: 1;
        border-radius: var(--radius-lg);
        border: 1px dashed rgba(122, 132, 113, 0.35);
        background: rgba(254, 252, 247, 0.8);
        padding: 1.5rem;
        position: relative;
        overflow: hidden auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        min-height: 320px;
      }
      .blank-hint {
        font-size: var(--step--1);
        color: var(--ink-muted);
      }
      .textbox {
        position: absolute;
        top: 0;
        left: 0;
        border-radius: var(--radius);
        border: 1px solid rgba(122, 132, 113, 0.35);
        box-shadow: var(--shadow-1);
        background: var(--soft-white);
        width: clamp(240px, 35%, 420px);
        min-height: 140px;
        display: flex;
        flex-direction: column;
        cursor: move;
        touch-action: none;
      }
      .textbox-handle {
        padding: 0.5rem 0.75rem;
        background: rgba(122, 132, 113, 0.16);
        border-bottom: 1px solid rgba(122, 132, 113, 0.2);
        font-weight: 700;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        font-size: 0.75rem;
        cursor: grab;
        border-top-left-radius: var(--radius);
        border-top-right-radius: var(--radius);
      }
      .textbox-body {
        flex: 1;
        padding: 0.75rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
        line-height: 1.5;
        outline: none;
        cursor: text;
        overflow: auto;
      }
      .textbox-body:focus {
        box-shadow: inset 0 0 0 2px rgba(122, 132, 113, 0.35);
      }
      .textbox-remove {
        position: absolute;
        top: 0.35rem;
        right: 0.35rem;
        border: none;
        background: rgba(254, 252, 247, 0.8);
        color: var(--forest-shadow);
        border-radius: 50%;
        width: 28px;
        height: 28px;
        display: grid;
        place-items: center;
        cursor: pointer;
        box-shadow: var(--shadow-1);
      }
      .textbox-remove:hover {
        color: #c62828;
      }
      .mindmap {
        border-radius: var(--radius-lg);
        border: 1px solid rgba(122, 132, 113, 0.35);
        background: linear-gradient(
          135deg,
          rgba(248, 246, 240, 0.92),
          rgba(236, 231, 220, 0.75)
        );
        box-shadow: var(--shadow-1);
        padding: clamp(1.2rem, 3vw, 1.8rem);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .mindmap-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }
      .mindmap-title {
        font-family: var(--font-display);
        font-size: var(--step-1);
        margin: 0;
        color: var(--deep-forest);
      }
      .mindmap-remove {
        border: none;
        background: transparent;
        color: var(--forest-shadow);
        font-weight: 700;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
      }
      .mindmap-remove:hover {
        color: #c62828;
      }
      .mindmap-center {
        align-self: center;
        min-width: 180px;
        padding: 0.9rem 1.1rem;
        border-radius: 999px;
        background: var(--primary-sage);
        color: #fff;
        font-weight: 700;
        text-align: center;
        font-family: var(--font-display);
        letter-spacing: 0.03em;
        outline: none;
      }
      .mindmap-center:focus {
        box-shadow: 0 0 0 3px rgba(156, 175, 136, 0.35);
      }
      .mindmap-branches {
        display: grid;
        gap: 0.75rem;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }
      .mindmap-branch {
        position: relative;
        padding: 0.75rem 0.85rem;
        border-radius: var(--radius);
        background: rgba(254, 252, 247, 0.95);
        border: 1px solid rgba(122, 132, 113, 0.2);
        box-shadow: var(--shadow-1);
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
      }
      .mindmap-branch textarea {
        width: 100%;
        border: none;
        background: transparent;
        font-family: var(--font-body);
        font-size: var(--step--1);
        line-height: 1.5;
        resize: vertical;
        min-height: 64px;
      }
      .branch-remove {
        align-self: flex-end;
        border: none;
        background: transparent;
        color: var(--forest-shadow);
        cursor: pointer;
        font-weight: 600;
        font-size: 0.85rem;
      }
      .branch-remove:hover {
        color: #c62828;
      }
      .mindmap-form {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: center;
      }
      .mindmap-form input {
        flex: 1 1 220px;
        border-radius: 999px;
        border: 1px solid rgba(122, 132, 113, 0.35);
        padding: 0.45rem 0.85rem;
        font-family: var(--font-body);
        font-size: var(--step--1);
      }
      .mindmap-form button {
        border: none;
        border-radius: 999px;
        padding: 0.55rem 1.1rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        cursor: pointer;
        background: var(--secondary-sage);
        color: var(--deep-forest);
        box-shadow: var(--shadow-1);
      }
      .mindmap-form button:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-2);
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
      }
/* =====================================================================
         Organic Sage UI — V3 Redraft
         ===================================================================== */
      :root {
        --primary-sage: #7A8471;
        --secondary-sage: #9CAF88;
        --tertiary-sage: #B8C5A6;
        --warm-cream: #F8F6F0;
        --soft-white: #FEFCF7;
        --forest-shadow: #5A6B52;
        --border-sage: rgba(122,132,113,0.20);
        --hover-sage: rgba(156,175,136,0.15);
        --deep-forest: #3E4A3A;
        --ink: #2F3A2B;
        --ink-muted: #5A6B52;
        --font-display: 'Questrial', system-ui, sans-serif;
        --font-body: 'Nunito', system-ui, sans-serif;
        --step--1: clamp(0.9rem, 0.85rem + 0.1vw, 0.95rem);
        --step-0:  clamp(1rem,  0.95rem + 0.2vw, 1.1rem);
        --step-1:  clamp(1.125rem, 1.05rem + 0.35vw, 1.35rem);
        --step-2:  clamp(1.35rem, 1.2rem + 0.6vw, 1.7rem);
        --step-3:  clamp(1.8rem, 1.5rem + 1vw, 2.3rem);
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --radius: 16px;
        --radius-lg: 20px;
        --shadow-1: 0 1px 2px rgba(34,41,32,0.05), 0 2px 8px rgba(34,41,32,0.06);
        --shadow-2: 0 6px 24px rgba(34,41,32,0.08), 0 16px 36px rgba(34,41,32,0.08);
        --shadow-glow: 0 0 45px 10px color-mix(in srgb, var(--secondary-sage) 15%, transparent);
        --toolbar-h: 72px;
        --workspace-pad: 24px;
        --stage-pad: clamp(32px, 5vw, 64px);
        --stage-radius: 18px;
        --slide-aspect-w: 16;
        --slide-aspect-h: 9;
      }
      html, body { margin: 0; padding: 0; min-height: 100dvh; color: var(--forest-shadow); background: linear-gradient(135deg, #F8F6F0 0%, #F5F3ED 100%); font-family: var(--font-body); font-size: var(--step-0); line-height: 1.6; -webkit-font-smoothing: antialiased; overflow: hidden; }
      .deck-app { display: grid; grid-template-rows: var(--toolbar-h) 1fr; min-height: 100dvh; }
      .deck-toolbar { position: sticky; top: 0; z-index: 50; height: var(--toolbar-h); display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: var(--space-4); padding: 0 max(24px, 4vw); background: color-mix(in srgb, var(--soft-white) 85%, transparent); border-bottom: 1px solid var(--border-sage); box-shadow: 0 8px 20px rgba(34,41,32,0.05); backdrop-filter: blur(8px) saturate(1.1); }
      .toolbar-brand { display: flex; align-items: center; gap: 0.75rem; font-family: var(--font-display); font-size: 1.05rem; color: var(--forest-shadow); }
      .slide-counter { font-family: var(--font-display); color: var(--ink-muted); }
      .deck-workspace { height: calc(100dvh - var(--toolbar-h)); padding: var(--workspace-pad); display: grid; place-items: center; overflow: hidden; background: radial-gradient(900px 600px at 20% 0%, rgba(156,175,136,0.08) 0%, transparent 70%), radial-gradient(800px 700px at 80% 100%, rgba(90,107,82,0.06) 0%, transparent 70%); }
      .stage-viewport { position: relative; display: grid; place-items: center; }
      .slide-stage { position: relative; border-radius: var(--stage-radius); background-color: var(--soft-white); box-shadow: var(--shadow-glow), 0 24px 60px rgba(34,41,32,0.10); aspect-ratio: var(--slide-aspect-w) / var(--slide-aspect-h); width: min(calc((100dvh - var(--toolbar-h) - (var(--workspace-pad) * 2)) * (var(--slide-aspect-w) / var(--slide-aspect-h))), calc(100vw - (var(--workspace-pad) * 2))); max-width: 100%; overflow: hidden; outline: 1px solid var(--border-sage); transition: opacity 300ms ease-in-out; }
      .slide-stage.hidden { position: absolute; opacity: 0; pointer-events: none; }
      .slide-inner { position: absolute; inset: 0; padding: var(--stage-pad); display: flex; flex-direction: column; justify-content: center; }
      .slide-nav { position: absolute; top: 50%; transform: translateY(-50%); z-index: 10; width: 48px; height: 48px; border-radius: 50%; background: color-mix(in srgb, var(--soft-white) 80%, transparent); border: 1px solid var(--border-sage); color: var(--primary-sage); display: grid; place-items: center; cursor: pointer; backdrop-filter: blur(4px); box-shadow: var(--shadow-1); opacity: 0; scale: 0.8; transition: all 200ms cubic-bezier(.2,.8,.2,1); }
      .stage-viewport:hover .slide-nav { opacity: 1; scale: 1; }
      .slide-nav:hover { box-shadow: var(--shadow-2); background: var(--soft-white); color: var(--deep-forest); }
      .slide-nav-prev { left: 24px; }
      .slide-nav-next { right: 24px; }
      .grid-container { display: grid; grid-template-columns: repeat(12, 1fr); gap: 24px; width: 100%; height: 100%; align-items: center; }
      .col-span-4 { grid-column: span 4 / span 4; } .col-span-5 { grid-column: span 5 / span 5; } .col-span-6 { grid-column: span 6 / span 6; } .col-span-7 { grid-column: span 7 / span 7; } .col-span-8 { grid-column: span 8 / span 8; } .col-span-12 { grid-column: span 12 / span 12; }
      .col-start-7 { grid-column-start: 7; }
      .align-self-start { align-self: flex-start; } .align-self-center { align-self: center; }
      .card { background-color: color-mix(in srgb, var(--warm-cream) 40%, var(--soft-white) 60%); border: 1px solid var(--border-sage); border-radius: var(--radius); padding: var(--space-5); box-shadow: var(--shadow-1); }
      .card.card-full-height { height: 100%; display: flex; flex-direction: column; justify-content: center; }
      .card .icon { font-size: 1.8rem; color: var(--primary-sage); margin-bottom: 0.75rem; }
      .card h3 { margin: 0 0 0.5rem 0; font-family: var(--font-display); color: var(--deep-forest); font-size: var(--step-1); }
      .card p { margin: 0; font-size: var(--step--1); }
      .card p + p { margin-top: 0.5rem; }
      .img-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; }
      .img-overlay { position: absolute; inset: 0; width: 100%; height: 100%; z-index: 1; }
      .full-width-bg .slide-inner { padding: 0; }
      .full-width-bg .bg-content { padding: var(--stage-pad); position: relative; z-index: 2; }
      blockquote { margin: 1em 0 0 0; padding: 0.8em 1em; border-left: 4px solid var(--secondary-sage); background: color-mix(in srgb, var(--warm-cream) 60%, transparent); border-radius: 0 10px 10px 0; font-style: italic; font-size: var(--step--1); }
      .dialogue-box { background: #fff; border-radius: 12px; padding: var(--space-6); border: 1px solid var(--border-sage); box-shadow: var(--shadow-1); font-size: var(--step-0); }
      .text-highlight { color: var(--primary-sage); font-weight: 700; }
      hr.divider { border: 0; border-top: 1px solid var(--border-sage); margin: 0.75rem 0; }
      ol { list-style: none; counter-reset: item; padding-left: 0; }
      ol li { counter-increment: item; margin-bottom: 0.5em; position: relative; padding-left: 2.5em; }
      ol li::before { content: counter(item); position: absolute; left: 0; top: 0; width: 1.8em; height: 1.8em; border-radius: 50%; background-color: var(--secondary-sage); color: var(--soft-white); font-weight: 700; display: grid; place-items: center; font-size: 0.8em; line-height: 1; }
      .slide-stage h1 { font-family: var(--font-display); font-size: clamp(2.5rem, 1.4rem + 3.2vw, 4.5rem); line-height: 1.1; color: var(--deep-forest); margin: 0 0 0.2em 0; }
      .slide-stage h2 { font-family: var(--font-display); font-size: clamp(1.8rem, 1.1rem + 2vw, 3rem); line-height: 1.2; color: var(--deep-forest); margin: 0 0 0.5em 0; }
      .slide-stage h2.subtitle { color: var(--primary-sage); }
      .slide-stage p, .slide-stage li { font-size: clamp(1rem, 0.95rem + 0.4vw, 1.25rem); color: var(--forest-shadow); margin: 0.4em 0; }
      .slide-stage ul { padding-left: 0; margin: 1em 0; list-style: none; }
      .slide-stage ul li { position: relative; padding-left: 1.5em; margin-bottom: 0.6em; }
      .slide-stage ul li::before { content: "\f058"; font-family: "Font Awesome 6 Free"; font-weight: 900; color: var(--secondary-sage); position: absolute; left: 0; top: 0.2em; font-size: 0.9em; }
      .centered-text { text-align: center; }
      @media (prefers-color-scheme: dark) {
        :root { --soft-white: #1E211C; --warm-cream: #23261F; --forest-shadow: #DDE6D4; --ink: #E9EFE5; --ink-muted: #AEB9AA; --border-sage: rgba(184,197,166,0.25); --deep-forest: #E9EFE5; --primary-sage: #9CAF88; --shadow-glow: 0 0 50px 10px rgba(184, 197, 166, 0.1); }
        body { background: linear-gradient(135deg, #191D18 0%, #1B1E19 100%); }
        .slide-stage { background: #141713; outline-color: rgba(184,197,166,0.20); box-shadow: var(--shadow-glow), 0 24px 60px rgba(0,0,0,0.35); }
        .card { background-color: color-mix(in srgb, var(--warm-cream) 40%, var(--soft-white) 60%); border-color: rgba(184,197,166,0.25); }
        .dialogue-box { background: var(--warm-cream); border-color: rgba(184,197,166,0.25); }
        ol li::before { background-color: var(--primary-sage); }
      }
    </style>
  </head>
  <body>
    <div class="deck-app">
        <header class="deck-toolbar">
        <div class="toolbar-brand">
          <i
            class="fa-solid fa-seedling"
            style="color: var(--primary-sage)"
          ></i>
          <span>Noor Community · A2 Lesson</span>
        </div>
        <div id="slide-counter" class="slide-counter">1 / 16</div>
        <div class="toolbar-actions">
          <button id="save-state-btn" class="toolbar-btn" type="button">
            <i class="fa-solid fa-floppy-disk"></i>
            Save Deck
          </button>
          <button id="load-state-btn" class="toolbar-btn secondary" type="button">
            <i class="fa-solid fa-file-import"></i>
            Load Deck
          </button>
          <input
            id="load-state-input"
            class="sr-only"
            type="file"
            accept="application/json"
          />
          <div class="highlight-controls" role="group" aria-label="Highlight text">
            <i class="fa-solid fa-highlighter" aria-hidden="true"></i>
            <label class="sr-only" for="highlight-color">Highlight colour</label>
            <select id="highlight-color" class="toolbar-select">
              <option value="#F9E27D">Sunbeam</option>
              <option value="#A5D6A7">Meadow</option>
              <option value="#FFCCBC">Coral</option>
            </select>
            <button id="highlight-btn" class="toolbar-btn ghost" type="button">
              Apply
            </button>
            <button
              id="remove-highlight-btn"
              class="toolbar-btn ghost"
              type="button"
            >
              Clear
            </button>
          </div>
          <button id="add-slide-btn" class="toolbar-btn" type="button">
            <i class="fa-solid fa-plus"></i>
            Add Blank Slide
          </button>
        </div>
      </header>
      <main class="deck-workspace">
        <div class="stage-viewport">
          <!-- SLIDE 1: Title -->
                          <div class="slide-stage">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                       <div class="col-span-7">
                                          <p class="subtitle" style="color: var(--primary-sage);">A2 English Lesson</p>
                                          <h1>A Day in the City</h1>
                                          <p style="font-size: var(--step-2); color: var(--ink-muted);">A good day, or a disastrous day?</p>
                                      </div>
                                      <div class="col-span-5 centered-text">
                                          <i class="fa-solid fa-city" style="font-size: 9rem; color: var(--tertiary-sage); opacity: 0.8;"></i>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 2: Objectives -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                      <div class="col-span-12 centered-text">
                                          <h2 class="subtitle">Today's Goals</h2>
                                      </div>
                                      <div class="col-span-4">
                                          <div class="card card-full-height"><i class="fas fa-edit icon"></i><h3>Plan a Story</h3><p>Choose places and events to create a story about your day.</p></div>
                                      </div>
                                      <div class="col-span-4">
                                          <div class="card card-full-height"><i class="fas fa-stream icon"></i><h3>Use Sequencing Words</h3><p>Tell your story in order using <strong>first, then, finally</strong> and the Past Simple.</p></div>
                                      </div>
                                      <div class="col-span-4">
                                          <div class="card card-full-height"><i class="fas fa-smile icon"></i><i class="fas fa-frown icon"></i><h3>Choose the Mood</h3><p>Decide if your story is about a lucky, happy day or a disastrous, unlucky day.</p></div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 3: Warm-Up / Lead-in -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                      <div class="col-span-5 centered-text">
                                         <i class="fa-solid fa-mug-hot" style="font-size: 5rem; color: var(--tertiary-sage);"></i>
                                         <h2 style="margin-top: 1rem;">Let's Talk!</h2>
                                      </div>
                                      <div class="col-span-7">
                                          <p><strong>1.</strong> Think about your city. What are three interesting places to visit in <span class="text-highlight">one day</span>? (e.g., park, shop, museum)</p>
                                          <hr class="divider">
                                          <p><strong>2.</strong> What small thing can happen to make a normal day a <span class="text-highlight">"good day"</span>?</p>
                                          <hr class="divider">
                                          <p><strong>3.</strong> What small thing can happen to make a normal day a <span class="text-highlight">"disastrous day"</span>?</p>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 4: Activity 1 Intro -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                   <div class="grid-container">
                                      <div class="col-span-5">
                                          <h2 class="subtitle">Activity 1</h2>
                                          <h2>Places &amp; Events</h2>
                                          <p>Every place has possibilities for good events and bad events.</p>
                                      </div>
                                       <div class="col-span-7">
                                          <div class="dialogue-box">
                                              <h3>For example:</h3>
                                              <p><i class="fa-solid fa-tree" style="color:var(--secondary-sage); margin-right: 8px;"></i> At the <strong>park</strong>...</p>
                                              <p style="padding-left: 2em;"><i class="fa-solid fa-thumbs-up" style="color: #6E7A67;"></i> You could <span class="text-highlight">see a friend</span>.</p>
                                              <p style="padding-left: 2em;"><i class="fa-solid fa-thumbs-down" style="color: #A98484;"></i> It could start to <span class="text-highlight">rain</span>.</p>
                                              <hr class="divider">
                                              <p><i class="fa-solid fa-shopping-cart" style="color:var(--secondary-sage); margin-right: 8px;"></i> At the <strong>shop</strong>...</p>
                                              <p style="padding-left: 2em;"><i class="fa-solid fa-thumbs-up" style="color: #6E7A67;"></i> You could <span class="text-highlight">find some money</span>.</p>
                                              <p style="padding-left: 2em;"><i class="fa-solid fa-thumbs-down" style="color: #A98484;"></i> You could <span class="text-highlight">forget your wallet</span>.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 5: Activity 1 Task -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                      <div class="col-span-5 centered-text">
                                          <i class="fa-solid fa-lightbulb" style="font-size: 6rem; color: var(--tertiary-sage);"></i>
                                      </div>
                                      <div class="col-span-7">
                                          <h2 class="subtitle">Activity 1: Your Turn!</h2>
                                          <p>With your partner, choose <strong>three places</strong> (e.g., museum, mosque, market).</p>
                                          <div class="card" style="margin-top: 1rem;">
                                              <h3>For each place, brainstorm:</h3>
                                              <ul>
                                                  <li>One possible <strong>good event</strong> that could happen there.</li>
                                                  <li>One possible <strong>bad event</strong> that could happen there.</li>
                                              </ul>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 6: Activity 2 Intro -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                   <div class="grid-container">
                                      <div class="col-span-12 centered-text">
                                          <h2 class="subtitle">Activity 2</h2>
                                          <h2>Telling the Story's Order</h2>
                                          <p>We can tell two different stories with the same structure.</p>
                                      </div>
                                      <div class="col-span-6">
                                          <div class="card card-full-height">
                                              <h3>A Good Day</h3>
                                              <p><strong>First</strong>, I <strong>went</strong> to the park.</p>
                                              <p><strong>Then</strong>, I <strong>saw</strong> my friend.</p>
                                              <p><strong>Finally</strong>, we <strong>ate</strong> ice cream.</p>
                                          </div>
                                      </div>
                                      <div class="col-span-6">
                                          <div class="card card-full-height">
                                              <h3>A Bad Day</h3>
                                              <p><strong>First</strong>, I <strong>went</strong> to the park.</p>
                                              <p><strong>Then</strong>, I <strong>lost</strong> my keys.</p>
                                              <p><strong>Finally</strong>, I <strong>missed</strong> the bus home.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 7: Activity 2 Task -->
                           <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                       <div class="col-span-5 centered-text">
                                           <i class="fa-solid fa-link" style="font-size: 6rem; color: var(--tertiary-sage);"></i>
                                           <h2 style="margin-top: 1rem;">Story Chains</h2>
                                      </div>
                                       <div class="col-span-7">
                                          <h2 class="subtitle">Activity 2: Your Turn!</h2>
                                          <p>In your group, you will build a story together, sentence by sentence.</p>
                                          <div class="card">
                                          <h3>How to play:</h3>
                                          <p>I will give you the first sentence. The first student adds the next sentence (make it good or bad!). The next student continues. The last student finishes the story.</p>
                                          <blockquote><strong>Start with this:</strong> "First, I went to the museum..."</blockquote>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 8: Activity 3 Intro -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                   <div class="grid-container">
                                      <div class="col-span-5">
                                          <h2 class="subtitle">Activity 3</h2>
                                          <h2>Adding Detail</h2>
                                          <p>We can connect ideas into one sentence using 'and' or 'but'.</p>
                                      </div>
                                       <div class="col-span-7">
                                          <div class="dialogue-box">
                                              <h3>For example:</h3>
                                              <p><i class="fa-solid fa-plus" style="color:var(--secondary-sage); margin-right: 8px;"></i> I <strong>walked</strong> through the park <span class="text-highlight">and</span> I <strong>found</strong> 20 shekels!</p>
                                              <hr class="divider">
                                              <p><i class="fa-solid fa-exclamation-triangle" style="color:var(--secondary-sage); margin-right: 8px;"></i> I <strong>went</strong> to the shop to buy bread, <span class="text-highlight">but</span> I <strong>forgot</strong> my money.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 9: Activity 3 Task -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                      <div class="col-span-5 centered-text">
                                          <i class="fa-solid fa-pen-fancy" style="font-size: 6rem; color: var(--tertiary-sage);"></i>
                                          <h2 style="margin-top: 1rem;">One Place, Two Stories</h2>
                                      </div>
                                      <div class="col-span-7">
                                          <h2 class="subtitle">Activity 3: Your Turn!</h2>
                                          <p>With your partner, I will give you a place. You must create two different sentences about it.</p>
                                          <ol>
                                              <li>One sentence describing a <strong>good event</strong>.</li>
                                              <li>One sentence describing a <strong>bad event</strong>.</li>
                                          </ol>
                                          <div class="card" style="margin-top: 1rem;">
                                              <p><strong>Your Place:</strong> The Mosque</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                           <!-- SLIDE 10: Activity 4 Intro -->
                           <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                      <div class="col-span-12 centered-text">
                                          <h2 class="subtitle">Activity 4</h2>
                                          <h2>What Happened Next?</h2>
                                          <p>Let's practice connecting events in a story.</p>
                                      </div>
                                      <div class="col-span-12">
                                         <div class="card centered-text">
                                           <h3>The Scenario:</h3>
                                           <p>Your plan was: <strong>First</strong>, go to the shop, <strong>then</strong> meet a friend at the park.</p>
                                           <p>But a <span class="text-highlight">disaster</span> happened at the shop!</p>
                                           <p><strong>What was the disaster, and what did you do next?</strong></p>
                                         </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 11: Activity 4 Task -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                   <div class="grid-container">
                                       <div class="col-span-5 centered-text">
                                           <i class="fa-solid fa-user-secret" style="font-size: 6rem; color: var(--tertiary-sage);"></i>
                                           <h2 style="margin-top: 1rem;">Finish the Story</h2>
                                      </div>
                                       <div class="col-span-7">
                                          <h2 class="subtitle">Activity 4: Your Turn!</h2>
                                          <p>In your group, create a short story based on this plan:</p>
                                          <div class="card">
                                          <h3>Plan: Go to the mosque, then go to the market.</h3>
                                          <p><strong>1. Invent a "disaster"</strong> that happens at the mosque.</p>
                                          <p><strong>2. Decide what happened next</strong> at the market.</p>
                                          <p><strong>3. How did the story end?</strong></p>
                                          <p>Be ready to share your group's story.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 12: Main Task Intro -->
                          <div class="slide-stage hidden centered-text">
                              <div class="slide-inner">
                                  <i class="fa-solid fa-star" style="font-size: 4rem; color: var(--primary-sage);"></i>
                                  <h1>Main Task: My Day in the City</h1>
                                  <h2 class="subtitle">Time to be the storyteller!</h2>
                              </div>
                          </div>

                          <!-- SLIDE 13: Main Task Part 1 -->
                          <div class="slide-stage hidden full-width-bg">
                              <img src="https://images.pexels.com/photos/3184405/pexels-photo-3184405.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Two friends catching up over coffee" class="img-bg" style="opacity: 0.12;">
                              <div class="img-overlay" style="background: linear-gradient(180deg, var(--soft-white) 10%, transparent 100%);"></div>
                              <div class="slide-inner">
                                  <div class="bg-content grid-container align-self-start">
                                      <div class="col-span-12 centered-text">
                                          <h2>Part 1: Create &amp; Tell Your Story</h2>
                                          <p>You will tell a story to your partner.</p>
                                      </div>
                                      <div class="col-span-12">
                                          <div class="card">
                                               <ol>
                                                  <li><strong>Choose:</strong> Is your story about a <span class="text-highlight">GOOD day</span> or a <span class="text-highlight">DISASTROUS day</span>?</li>
                                                  <li><strong>Plan:</strong> Think of a short story with 3 steps. Use <strong>First, Then, Finally</strong>. Your story should visit at least two different places.</li>
                                                  <li><strong>Tell:</strong> Tell your story to your partner. The listener must ask at least one follow-up question!</li>
                                              </ol>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 14: Main Task Part 2 -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                   <div class="grid-container">
                                      <div class="col-span-12 centered-text">
                                          <h2 class="subtitle">Main Task</h2>
                                          <h2>Part 2: Guess the Story!</h2>
                                      </div>
                                      <div class="col-span-5 centered-text">
                                          <i class="fa-solid fa-people-group" style="font-size: 6rem; color: var(--tertiary-sage);"></i>
                                          <p style="margin-top: 1rem;">Join another pair to make a group of four.</p>
                                      </div>
                                      <div class="col-span-7">
                                          <div class="card card-full-height">
                                              <i class="fa-solid fa-question-circle icon"></i>
                                              <h3>Report your partner's story.</h3>
                                              <p>Tell your new group about your first partner's story. But... <strong>do not say</strong> if it was a good or disastrous day!</p>
                                              <hr class="divider">
                                              <p>The group must listen and then <strong>guess:</strong> Was it a good day or a disastrous day?</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 15: Reflection -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner">
                                  <div class="grid-container">
                                       <div class="col-span-12 centered-text">
                                          <h2 class="subtitle">Let's Reflect!</h2>
                                          <p>Think about your learning today.</p>
                                      </div>
                                      <div class="col-span-4"><div class="card card-full-height"><p>Was it easier to create a "good day" story or a "disastrous day" story? Why?</p></div></div>
                                      <div class="col-span-4"><div class="card card-full-height"><p>What new vocabulary for places or events did you use today?</p></div></div>
                                      <div class="col-span-4"><div class="card card-full-height"><p>What is one thing you feel more confident about now?</p></div></div>
                                  </div>
                              </div>
                          </div>

                          <!-- SLIDE 16: End -->
                          <div class="slide-stage hidden">
                              <div class="slide-inner centered-text">
                                  <i class="fa-solid fa-hands-clpping" style="font-size: 4rem; color: var(--primary-sage);"></i>
                                  <h1>Great work today!</h1>
                                  <h2 class="subtitle">See you next time!</h2>
                              </div>
                          </div>

                          <button class="slide-nav slide-nav-prev" aria-label="Previous Slide">
                              <i class="fa-solid fa-chevron-left"></i>
                          </button>
                          <button class="slide-nav slide-nav-next" aria-label="Next Slide">
                              <i class="fa-solid fa-chevron-right"></i>
                          </button>
        </div>
      </main>
    </div>
<script type="module" src="../../../js/interactivemodule.js"></script>
<script type="module">
  import { setupInteractiveDeck } from "../../../js/interactivemodule.js";
  setupInteractiveDeck();
</script>

</body>
</html>
