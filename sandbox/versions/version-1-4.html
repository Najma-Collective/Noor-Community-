<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Applying Critical Thinking to Global Development Challenges</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Questrial&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="../../CSS-slides.css" />
    <link rel="stylesheet" href="../sandbox-css.css" />
    <style>
      .editable-text {
        cursor: text;
        outline: none;
        word-break: break-word;
        overflow-wrap: break-word;
      }

      .editable-text:focus {
        outline: 2px dashed var(--primary-sage, #7aa884);
        outline-offset: 2px;
      }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#lesson-stage">Skip to lesson workspace</a>
    <div id="deck-status" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
    <div id="deck-toast-root" class="deck-toast-container" aria-live="polite" aria-atomic="true"></div>
    <div class="deck-app">
      <header class="deck-toolbar">
        <div class="toolbar-brand">
          <i
            class="fa-solid fa-seedling"
            style="color: var(--primary-sage)"
          ></i>
          <span>Noor Community</span>
        </div>
        <div id="slide-counter" class="slide-counter">1 / 19</div>
        <div class="toolbar-actions">
          <button id="save-state-btn" class="toolbar-btn" type="button">
            <i class="fa-solid fa-floppy-disk"></i>
            Save Deck
          </button>
          <button id="load-state-btn" class="toolbar-btn secondary" type="button">
            <i class="fa-solid fa-file-import"></i>
            Load Deck
          </button>
          <input
            id="load-state-input"
            class="sr-only"
            type="file"
            accept="application/json"
          />
          <div class="highlight-controls" role="group" aria-label="Highlight text">
            <i class="fa-solid fa-highlighter" aria-hidden="true"></i>
            <label class="sr-only" for="highlight-color">Highlight colour</label>
            <select id="highlight-color" class="toolbar-select">
              <option value="#F9E27D">Sunbeam</option>
              <option value="#A5D6A7">Meadow</option>
              <option value="#FFCCBC">Coral</option>
            </select>
            <button id="highlight-btn" class="toolbar-btn ghost" type="button">
              Apply
            </button>
            <button
              id="remove-highlight-btn"
              class="toolbar-btn ghost"
              type="button"
            >
              Clear
            </button>
          </div>
          <button id="add-slide-btn" class="toolbar-btn" type="button">
            <i class="fa-solid fa-plus"></i>
            Add Blank Slide
          </button>
        </div>
      </header>
      <main id="lesson-stage" class="deck-workspace">
        <div class="stage-viewport">
          <!-- Slide 1: Title Slide (Full Bleed) -->
          <div class="slide-stage full-width-bg">
            <div class="bg-media">
              <img
                data-remote-src="https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&fit=crop&w=1600&h=900"
                alt=""
                loading="eager"
                fetchpriority="high"
                decoding="async"
              />
            </div>
            <div class="img-overlay"></div>
            <div class="slide-inner">
              <div class="bg-content">
                <div class="overlay-card">
                  <h1>
                    Applying Critical Thinking to Global Development Challenges
                  </h1>
                  <p class="deck-subtitle">
                    Critically evaluating project proposals and expressing
                    nuanced opinions
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 2: Grounding Activity -->
          <div class="slide-stage hidden full-width-bg">
            <div class="bg-media">
              <img
                data-remote-src="https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg"
                alt=""
                loading="lazy"
                decoding="async"
              />
            </div>
            <div
              class="img-overlay"
              style="background: rgba(0, 0, 0, 0.3)"
            ></div>
            <div class="slide-inner" style="justify-content: center">
              <div class="bg-content centered">
                <div class="overlay-card centered">
                  <span class="pill overlay-pill"
                    ><i class="fa-solid fa-leaf"></i> Grounding Activity</span
                  >
                  <p class="deck-subtitle" style="font-size: var(--step-1)">
                    Take a deep breath in, hold for a moment, and slowly
                    release. Let's bring our full attention to the present
                    moment and prepare for our learning today.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 3: Lesson Aims -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-bullseye"></i> Today's Aims</span
              >
              <h2>By the end of this lesson, you will be able to...</h2>
              <div class="card">
                <ul class="instruction-list">
                  <li>
                    <i class="fa-solid fa-bullseye"></i>To identify and use
                    distancing language for expressing tentative opinions.
                  </li>
                  <li>
                    <i class="fa-solid fa-bullseye"></i>To use specific
                    vocabulary for evaluating project strengths and weaknesses.
                  </li>
                  <li>
                    <i class="fa-solid fa-bullseye"></i>To apply sentence stress
                    and intonation to show conviction or reservation.
                  </li>
                  <li>
                    <i class="fa-solid fa-bullseye"></i>To critically evaluate
                    an NGO project and present your analysis.
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Slide 4: Pre-task A -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-comments"></i> Pre-task A · 5
                minutes</span
              >
              <h2>What Makes a Project 'Good'?</h2>
              <div class="two-column-grid">
                <div class="card">
                  <ul class="instruction-list">
                    <li>
                      <i class="fa-solid fa-users"></i>
                      <div>
                        <strong
                          >Work in your breakout rooms for 4 minutes.</strong
                        >
                      </div>
                    </li>
                    <li>
                      <i class="fa-solid fa-comments"></i>
                      <div>
                        <strong>Discuss the following questions:</strong>
                      </div>
                    </li>
                  </ul>
                  <ol style="margin-top: 0.5rem">
                    <li>
                      Think about a community project you know of (in Palestine
                      or elsewhere). What was its goal?
                    </li>
                    <li>
                      What makes a community project successful or unsuccessful?
                    </li>
                    <li>
                      Brainstorm a list of 5-6 words you would use to describe a
                      successful project.
                    </li>
                  </ol>
                </div>
                  <div class="context-image">
                    <img
                      data-remote-src="https://images.pexels.com/photos/34290767/pexels-photo-34290767.jpeg?auto=compress&cs=tinysrgb&fit=crop&w=1600&h=900"
                      alt=""
                      loading="lazy"
                      decoding="async"
                    />
                  </div>
              </div>
            </div>
          </div>

          <!-- Slide 5: Pre-task B: Restrictive Practice (Unscramble) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-shuffle"></i> Pre-task B · Restrictive
                Practice · 7 minutes</span
              >
              <h2>Distancing Language: Unscramble the Sentences</h2>
              <div class="card" data-activity="unscramble">
                <p>
                  Here are sentences from a critique of a project proposal. Put
                  the words in the correct order.
                </p>
                <ul class="unscramble-list">
                  <li>
                    <p>
                      1. that / appears / the project's timeline / It / be /
                      seems / to / overly optimistic / .
                    </p>
                    <input
                      type="text"
                      class="unscramble-input"
                      data-answer="It appears that the project's timeline seems to be overly optimistic."
                      aria-label="Unscramble sentence 1"
                    />
                  </li>
                  <li>
                    <p>
                      2. some concern / There / be / to / about / seems /
                      long-term financial viability / the / .
                    </p>
                    <input
                      type="text"
                      class="unscramble-input"
                      data-answer="There seems to be some concern about the long-term financial viability."
                      aria-label="Unscramble sentence 2"
                    />
                  </li>
                  <li>
                    <p>
                      3. argue / might / that / the proposal / One /
                      sufficiently / doesn't / address / stakeholder engagement
                      / .
                    </p>
                    <input
                      type="text"
                      class="unscramble-input"
                      data-answer="One might argue that the proposal doesn't sufficiently address stakeholder engagement."
                      aria-label="Unscramble sentence 3"
                    />
                  </li>
                  <li>
                    <p>
                      4. a potential shortcoming / be / This / could / in / the
                      / implementation phase / .
                    </p>
                    <input
                      type="text"
                      class="unscramble-input"
                      data-answer="This could be a potential shortcoming in the implementation phase."
                      aria-label="Unscramble sentence 4"
                    />
                  </li>
                  <li>
                    <p>
                      5. have / The team / may / underestimated / logistical /
                      the / constraints / involved / .
                    </p>
                    <input
                      type="text"
                      class="unscramble-input"
                      data-answer="The team may have underestimated the logistical constraints involved."
                      aria-label="Unscramble sentence 5"
                    />
                  </li>
                </ul>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 6: Pre-task B: Semi-controlled Practice (Matching) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-link"></i> Pre-task B · Semi-controlled
                Practice · 7 minutes</span
              >
              <h2>Distancing Language: Match the Phrase to its Function</h2>
              <div class="card" data-activity="matching">
                <p>
                  What is the speaker *doing* when they use these phrases? Match
                  the phrases with their functions.
                </p>
                <div class="matching-stack">
                  <div
                    class="matching-option"
                    data-correct="Presenting an observation based on available evidence."
                  >
                    <span>It appears that...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                  <div
                    class="matching-option"
                    data-correct="Reporting an observation as a general feeling of worry."
                  >
                    <span>There seems to be some concern about...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                  <div
                    class="matching-option"
                    data-correct="Presenting a counter-argument impersonally."
                  >
                    <span>One might argue that...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                  <div
                    class="matching-option"
                    data-correct="Softening a direct criticism by framing it as a possibility."
                  >
                    <span>This could be a potential shortcoming...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                  <div
                    class="matching-option"
                    data-correct="Speculating about a possible past miscalculation."
                  >
                    <span>The team may have underestimated...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                  <div
                    class="matching-option"
                    data-correct="Signaling personal opinion while keeping it open to change."
                  >
                    <span>My initial impression is that...</span>
                    <select>
                      <option value="">Select function...</option>
                      <option>
                        Presenting an observation based on available evidence.
                      </option>
                      <option>
                        Reporting an observation as a general feeling of worry.
                      </option>
                      <option>
                        Presenting a counter-argument impersonally.
                      </option>
                      <option>
                        Softening a direct criticism by framing it as a
                        possibility.
                      </option>
                      <option>
                        Speculating about a possible past miscalculation.
                      </option>
                      <option>
                        Signaling personal opinion while keeping it open to
                        change.
                      </option>
                    </select>
                  </div>
                </div>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 7: Pre-task B: Freer Practice -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-comments"></i> Pre-task B · Freer
                Practice · 6 minutes</span
              >
              <h2>Distancing Language: Mini-Critiques</h2>
              <div class="card">
                <ul class="instruction-list">
                  <li>
                    <i class="fa-solid fa-user-group"></i>
                    <div>
                      <strong
                        >Work in pairs in breakout rooms for 3 minutes.</strong
                      >
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-right-left"></i>
                    <div>
                      <strong
                        >Read the direct statements below. Take turns rephrasing
                        them into more diplomatic critiques using the language
                        we have studied. Try to use a different phrase for each
                        one.</strong
                      >
                    </div>
                  </li>
                </ul>
                <div class="column-card" style="margin-top: 0.5rem">
                  <p><strong>Student A:</strong> Start with statement 1.</p>
                  <p>
                    <strong>Student B:</strong> Respond with a critique, then
                    read statement 2.
                  </p>
                </div>
                <ol>
                  <li>"The budget is unrealistic."</li>
                  <li>"They didn't research the local community's needs."</li>
                  <li>"This project will fail because it's not scalable."</li>
                  <li>"The marketing plan is bad."</li>
                </ol>
              </div>
            </div>
          </div>

          <!-- Slide 8: Pre-task C: Restrictive Practice (MC Grammar) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-pen-ruler"></i> Pre-task C · Restrictive
                Practice · 7 minutes</span
              >
              <h2>Evaluation Lexis: Choose the Best Word</h2>
              <div class="card" data-activity="mc-grammar">
                <p>
                  Read the sentences below. Choose the best word to complete
                  each sentence.
                </p>
                <div class="quiz-card" data-answer="viable">
                  <p>
                    1. Before we approve the funding, we must ensure the project
                    is financially
                    <select>
                      <option>...</option>
                      <option>viable</option>
                      <option>scalable</option>
                      <option>impactful</option></select
                    >.
                  </p>
                </div>
                <div class="quiz-card" data-answer="beneficiaries">
                  <p>
                    2. The main
                    <select>
                      <option>...</option>
                      <option>stakeholders</option>
                      <option>beneficiaries</option>
                      <option>constraints</option>
                    </select>
                    of this initiative will be unemployed youth in the Nablus
                    area.
                  </p>
                </div>
                <div class="quiz-card" data-answer="scalable">
                  <p>
                    3. A major concern is whether the project is
                    <select>
                      <option>...</option>
                      <option>sustainable</option>
                      <option>scalable</option>
                      <option>feasible</option></select
                    >; can we replicate it in other cities like Hebron and
                    Jenin?
                  </p>
                </div>
                <div class="quiz-card" data-answer="stakeholders">
                  <p>
                    4. We need to consult with all community
                    <select>
                      <option>...</option>
                      <option>stakeholders</option>
                      <option>beneficiaries</option>
                      <option>shortcomings</option></select
                    >, not just the local council.
                  </p>
                </div>
                <div class="quiz-card" data-answer="shortcomings">
                  <p>
                    5. While the idea is excellent, one of its
                    <select>
                      <option>...</option>
                      <option>leverage</option>
                      <option>constraints</option>
                      <option>shortcomings</option>
                    </select>
                    is a lack of a detailed timeline.
                  </p>
                </div>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 9: Pre-task C: Semi-controlled Practice (Categorization) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-layer-group"></i> Pre-task C ·
                Semi-controlled Practice · 7 minutes</span
              >
              <h2>Evaluation Lexis: Categorize the Concepts</h2>
              <div class="card" data-activity="categorization">
                <p>
                  Drag and drop the words into the correct category. Is it a
                  positive aspect, a negative aspect, or a neutral/descriptive
                  term?
                </p>
                <div class="token-bank">
                  <span class="click-token" data-category="Positive Aspects"
                    >viable</span
                  >
                  <span class="click-token" data-category="Positive Aspects"
                    >sustainable</span
                  >
                  <span class="click-token" data-category="Positive Aspects"
                    >leverage</span
                  >
                  <span class="click-token" data-category="Positive Aspects"
                    >feasible</span
                  >
                  <span class="click-token" data-category="Positive Aspects"
                    >scalable</span
                  >
                  <span class="click-token" data-category="Negative Aspects"
                    >shortcomings</span
                  >
                  <span class="click-token" data-category="Negative Aspects"
                    >constraints</span
                  >
                  <span
                    class="click-token"
                    data-category="Neutral / Descriptive Terms"
                    >impact</span
                  >
                  <span
                    class="click-token"
                    data-category="Neutral / Descriptive Terms"
                    >stakeholders</span
                  >
                  <span
                    class="click-token"
                    data-category="Neutral / Descriptive Terms"
                    >beneficiaries</span
                  >
                </div>
                <div class="drop-categorization">
                  <div class="category-column" data-category="Positive Aspects">
                    <h3>Positive Aspects</h3>
                    <div class="drop-zone"></div>
                  </div>
                  <div class="category-column" data-category="Negative Aspects">
                    <h3>Negative Aspects</h3>
                    <div class="drop-zone"></div>
                  </div>
                  <div
                    class="category-column"
                    data-category="Neutral / Descriptive Terms"
                  >
                    <h3>Neutral / Descriptive</h3>
                    <div class="drop-zone"></div>
                  </div>
                </div>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 10: Pre-task C: Freer Practice -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-pen-to-square"></i> Pre-task C · Freer
                Practice · 6 minutes</span
              >
              <h2>Evaluation Lexis: Ask a Critical Question</h2>
              <div class="card">
                <ul class="instruction-list">
                  <li>
                    <i class="fa-solid fa-users"></i>
                    <div>
                      <strong
                        >Work in your breakout rooms for 4 minutes.</strong
                      >
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-pen-to-square"></i>
                    <div>
                      <strong
                        >For each project idea, write one critical question
                        using at least one vocabulary word and one distancing
                        phrase.</strong
                      >
                    </div>
                  </li>
                </ul>
                <div
                  class="column-card"
                  style="
                    margin-top: 0.5rem;
                    background-color: var(--warm-cream);
                  "
                >
                  <p>
                    <strong>Example:</strong> For "A plan to build a new park,"
                    your question could be: "<em
                      >One might argue that the financial viability hasn't been
                      fully explored. Could you provide more details on the
                      budget?</em
                    >"
                  </p>
                </div>
                <p><strong>Prompts:</strong></p>
                <ul>
                  <li>
                    A proposal to create a mobile app for tourists visiting
                    Jerusalem's Old City.
                  </li>
                  <li>
                    An initiative to provide online coding bootcamps for
                    university graduates in Gaza.
                  </li>
                  <li>
                    A project to digitize and archive historical photographs
                    from across Palestine.
                  </li>
                </ul>
                <p
                  style="
                    font-size: var(--step--1);
                    font-style: italic;
                    color: var(--ink-muted);
                  "
                >
                  Your teacher will provide a link to a shared document for you
                  to write your questions.
                </p>
              </div>
            </div>
          </div>

          <!-- Slide 11: Pre-task D: Restrictive Practice (Pronunciation) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-ear-listen"></i> Pre-task D · Restrictive
                Practice · 7 minutes</span
              >
              <h2>Pronunciation: What's the Attitude?</h2>
              <div class="card" data-activity="mc-grammar-radio">
                <p>
                  You will hear 6 sentences. For each sentence, decide if the
                  speaker sounds <strong>convinced</strong> or
                  <strong>reserved/doubtful</strong>.
                </p>
                <div class="two-column-grid">
                  <div class="quiz-card" data-answer="Convinced">
                    <p>
                      <strong>Sentence 1:</strong> "This is a highly viable
                      project."
                    </p>
                    <audio
                      controls
                      src="/audio/audio1.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q1" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q1" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="Reserved/Doubtful">
                    <p>
                      <strong>Sentence 2:</strong> "The timeline seems...
                      optimistic."
                    </p>
                    <audio
                      controls
                      src="/audio/audio2.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q2" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q2" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="Convinced">
                    <p>
                      <strong>Sentence 3:</strong> "The community impact will be
                      significant."
                    </p>
                    <audio
                      controls
                      src="/audio/audio3.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q3" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q3" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="Reserved/Doubtful">
                    <p>
                      <strong>Sentence 4:</strong> "One *might* argue that the
                      budget is sufficient."
                    </p>
                    <audio
                      controls
                      src="/audio/audio4.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q4" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q4" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="Reserved/Doubtful">
                    <p>
                      <strong>Sentence 5:</strong> "I have *some* reservations
                      about the stakeholders."
                    </p>
                    <audio
                      controls
                      src="/audio/audio5.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q5" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q5" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="Convinced">
                    <p>
                      <strong>Sentence 6:</strong> "It's a sustainable and
                      scalable solution."
                    </p>
                    <audio
                      controls
                      src="/audio/audio6.mp3"
                      style="width: 100%"
                    ></audio>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="q6" /> Convinced</label
                      ><label class="quiz-option"
                        ><input type="radio" name="q6" />
                        Reserved/Doubtful</label
                      >
                    </div>
                  </div>
                </div>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 12: Pre-task D: Semi-controlled Practice (Stress Marking) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-arrow-pointer"></i> Pre-task D ·
                Semi-controlled Practice · 7 minutes</span
              >
              <h2>Pronunciation: Mark the Stress</h2>
              <div class="card" data-activity="stress-mark">
                <p>
                  Read the sentences below. Click the word you would emphasize
                  to show reservation or doubt.
                </p>
                <div class="stress-sentence" data-correct="could">
                  <span class="stress-word">That</span>
                  <span class="stress-word">could</span>
                  <span class="stress-word">be</span>
                  <span class="stress-word">one</span>
                  <span class="stress-word">way</span>
                  <span class="stress-word">to</span>
                  <span class="stress-word">approach</span>
                  <span class="stress-word">it.</span>
                </div>
                <div class="stress-sentence" data-correct="seems">
                  <span class="stress-word">It</span>
                  <span class="stress-word">seems</span>
                  <span class="stress-word">to</span>
                  <span class="stress-word">be</span>
                  <span class="stress-word">a</span>
                  <span class="stress-word">well-researched</span>
                  <span class="stress-word">proposal.</span>
                </div>
                <div class="stress-sentence" data-correct="theory">
                  <span class="stress-word">The</span>
                  <span class="stress-word">project</span>
                  <span class="stress-word">is</span>
                  <span class="stress-word">viable</span>
                  <span class="stress-word">in</span>
                  <span class="stress-word">theory.</span>
                </div>
                <div class="stress-sentence" data-correct="some">
                  <span class="stress-word">I</span>
                  <span class="stress-word">have</span>
                  <span class="stress-word">some</span>
                  <span class="stress-word">reservations</span>
                  <span class="stress-word">about</span>
                  <span class="stress-word">the</span>
                  <span class="stress-word">timeline.</span>
                </div>
                <div class="stress-sentence" data-correct="might">
                  <span class="stress-word">One</span>
                  <span class="stress-word">might</span>
                  <span class="stress-word">argue</span>
                  <span class="stress-word">that</span>
                  <span class="stress-word">the</span>
                  <span class="stress-word">budget</span>
                  <span class="stress-word">is</span>
                  <span class="stress-word">sufficient.</span>
                </div>
                <div class="activity-actions">
                  <button class="activity-btn" data-action="check">
                    Check Answers
                  </button>
                  <button class="activity-btn secondary" data-action="reset">
                    Reset
                  </button>
                </div>
                <div class="feedback-msg" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Slide 13: Pre-task D: Freer Practice -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-microphone"></i> Pre-task D · Freer
                Practice · 6 minutes</span
              >
              <h2>Pronunciation: Convince Me / Show Me Your Doubts</h2>
              <div class="card">
                <ul class="instruction-list">
                  <li>
                    <i class="fa-solid fa-user-group"></i>
                    <div>
                      <strong
                        >Work in pairs in breakout rooms for 3 minutes.</strong
                      >
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-microphone"></i>
                    <div>
                      <strong
                        >Take turns reading the statements below. Say each one
                        twice: first with a
                        <strong>convinced</strong> intonation, then with a
                        <strong>reserved/doubtful</strong> intonation.</strong
                      >
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-pen-to-square"></i>
                    <div>
                      <strong
                        >After practicing, create two of your own sentences
                        about a project and practice them with your
                        partner.</strong
                      >
                    </div>
                  </li>
                </ul>
                <ol style="margin-top: 1rem">
                  <li>"The project is perfectly feasible."</li>
                  <li>"This is a sustainable solution."</li>
                  <li>"The budget allocation seems appropriate."</li>
                  <li>"We have considered all the potential constraints."</li>
                  <li>"The beneficiaries have been correctly identified."</li>
                </ol>
              </div>
            </div>
          </div>

          <!-- Slide 14: Task Introduction -->
          <div class="slide-stage hidden full-width-bg">
            <div class="bg-media">
              <img
                data-remote-src="https://images.pexels.com/photos/959325/pexels-photo-959325.jpeg?auto=compress&cs=tinysrgb&fit=crop&w=1600&h=900"
                alt=""
                loading="lazy"
                decoding="async"
              />
            </div>
            <div class="img-overlay"></div>
            <div
              class="slide-inner"
              style="justify-content: center; align-items: flex-start"
            >
              <div class="bg-content">
                <div class="overlay-card">
                  <span class="pill overlay-pill"
                    ><i class="fa-solid fa-list-check"></i> Main Task</span
                  >
                  <h2>Task</h2>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 15: Task Preparation -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-file-lines"></i> Task Preparation</span
              >
              <h2>NGO Project Review Session</h2>
              <div class="card">
                <div
                  class="column-card"
                  style="background-color: var(--warm-cream)"
                >
                  <ul class="instruction-list">
                    <li>
                      <i class="fa-solid fa-building"></i>
                      <div>
                        <strong>Context:</strong> You are a team of project
                        officers at an NGO's main office in Ramallah. You must
                        review a new project proposal and prepare a brief
                        evaluation to present to another team.
                      </div>
                    </li>
                  </ul>
                </div>
                <ul class="instruction-list" style="margin-top: 1rem">
                  <li>
                    <i class="fa-solid fa-clock"></i>
                    <div>
                      <strong>Time:</strong> 12 minutes preparation in breakout
                      groups.
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-list-check"></i>
                    <div>
                      <strong>Step 1 (Choice):</strong> In your group, choose
                      ONE of the two project summaries to analyze. (Links will
                      be in the chat).
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-magnifying-glass-chart"></i>
                    <div>
                      <strong>Step 2 (Analysis & Prep):</strong> Analyze your
                      project and prepare a brief **oral presentation**. Use the
                      shared Google Doc from your teacher to outline your key
                      points for: Strengths, Weaknesses/Concerns, and a Final
                      Recommendation.
                    </div>
                  </li>
                  <li>
                    <i class="fa-solid fa-desktop"></i>
                    <div>
                      <strong>Technology:</strong> Your teacher will provide a
                      link to a shared **Google Doc** for your group to prepare
                      your presentation notes.
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Slide 16: Task -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-file-alt"></i> Task · Project
                Summaries</span
              >
              <h2>Choose Your Project to Evaluate</h2>
              <div class="two-column-grid">
                <div class="column-card">
                  <h3>
                    Project Summary 1: Jericho Digital Heritage Initiative
                  </h3>
                  <ul style="font-size: var(--step--1)">
                    <li>
                      <strong>Goal:</strong> To create a permanent, open-access
                      digital archive of Jericho's archaeological and cultural
                      heritage, including 3D models of sites and oral histories
                      from elders.
                    </li>
                    <li>
                      <strong>Beneficiaries:</strong> Academics, tourists,
                      Palestinian diaspora, local youth.
                    </li>
                    <li>
                      <strong>Budget:</strong> $75,000 for equipment, staff, and
                      web hosting for 2 years.
                    </li>
                    <li><strong>Timeline:</strong> 18 months.</li>
                    <li>
                      <strong>Key Activities:</strong> Purchase 3D scanning
                      equipment; train local university students as technicians;
                      interview 50 local elders; build a website and mobile app.
                    </li>
                  </ul>
                </div>
                <div class="column-card">
                  <h3>
                    Project Summary 2: Bethlehem Youth Social Enterprise Hub
                  </h3>
                  <ul style="font-size: var(--step--1)">
                    <li>
                      <strong>Goal:</strong> To establish a co-working space and
                      mentorship program for young people in Bethlehem wanting
                      to start their own socially-focused businesses.
                    </li>
                    <li>
                      <strong>Beneficiaries:</strong> Young entrepreneurs (18-30
                      years old), the wider Bethlehem community.
                    </li>
                    <li>
                      <strong>Budget:</strong> $90,000 for rent, renovations,
                      staff, and a small seed fund for 5 start-ups.
                    </li>
                    <li><strong>Timeline:</strong> 24 months.</li>
                    <li>
                      <strong>Key Activities:</strong> Secure and renovate a
                      central location; recruit 20 mentors from the business
                      community; run workshops on business planning and
                      marketing; host a final pitch competition.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 17: Reporting -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-person-chalkboard"></i> Reporting</span
              >
              <h2>Inter-Team Briefing</h2>
              <div class="two-column-grid">
                <div class="card">
                  <ul class="instruction-list">
                    <li>
                      <i class="fa-solid fa-clock"></i>
                      <div>
                        <strong>Time:</strong> 10 minutes total (5 minutes per
                        presentation).
                      </div>
                    </li>
                    <li>
                      <i class="fa-solid fa-people-arrows"></i>
                      <div>
                        <strong>Procedure:</strong> Groups who chose the
                        <strong>Jericho</strong> project will present to a group
                        who chose the <strong>Bethlehem</strong> project, and
                        vice-versa.
                      </div>
                    </li>
                    <li>
                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                      <div>
                        <strong
                          >One person from your group should share their screen.
                          All members should speak.</strong
                        >
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="column-card">
                  <h3><i class="fa-solid fa-ear-listen"></i> Listening Task</h3>
                  <p>As you listen, consider:</p>
                  <ul>
                    <li>What was their strongest argument?</li>
                    <li>Do you agree with their final recommendation?</li>
                    <li>
                      Prepare one follow-up question to ask the presenters.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 18: Practice Activities (Homework) -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-house-laptop"></i> Asynchronous
                Homework</span
              >
              <h2>Practice Activities</h2>
              <div class="card">
                <div class="card dense" data-activity="mc-grammar-radio">
                  <h3>Activity 1: Hedging Language Review</h3>
                  <p>Complete the sentences with the best phrase.</p>
                  <div class="quiz-card" data-answer="one might argue">
                    <p>
                      1. The data is strong, but ___ that the sample size is too
                      small.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="h1" /> it is a fact</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h1" /> one might argue</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h1" /> we know</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="There appears">
                    <p>
                      2. ___ to be some confusion regarding the project's
                      primary beneficiaries.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="h2" /> There is</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h2" /> There appears</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h2" /> There will be</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="may have">
                    <p>
                      3. The proposal is ambitious, and we ___ underestimated
                      the political constraints.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="h3" /> have definitely</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h3" /> will have</label
                      ><label class="quiz-option"
                        ><input type="radio" name="h3" /> may have</label
                      >
                    </div>
                  </div>
                </div>
                <div class="card dense" data-activity="mc-grammar-radio">
                  <h3>Activity 2: Vocabulary for Evaluation</h3>
                  <p>
                    Choose the correct word to complete the evaluation
                    statement.
                  </p>
                  <div class="quiz-card" data-answer="scalable">
                    <p>
                      1. The project is not ___ because it cannot be easily
                      replicated in other regions.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="v1" /> scalable</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v1" /> viable</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v1" /> impactful</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="constraints">
                    <p>
                      2. We need to consider the time and budget ___ before we
                      begin.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="v2" /> constraints</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v2" /> stakeholders</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v2" /> beneficiaries</label
                      >
                    </div>
                  </div>
                  <div class="quiz-card" data-answer="impact">
                    <p>
                      3. A key strength is the potential for a high positive ___
                      on the local community.
                    </p>
                    <div class="quiz-options">
                      <label class="quiz-option"
                        ><input type="radio" name="v3" /> impact</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v3" /> shortcoming</label
                      ><label class="quiz-option"
                        ><input type="radio" name="v3" /> leverage</label
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 19: Reflection -->
          <div class="slide-stage hidden">
            <div class="slide-inner">
              <span class="pill"
                ><i class="fa-solid fa-lightbulb"></i> Reflection</span
              >
              <h2>3-2-1 Reflection</h2>
              <div class="card">
                <p>
                  Individually, take 2 minutes to think about today's lesson.
                  Type your answers in the chat, but don't press send until I
                  say so.
                </p>
                <div class="column-card" style="background: var(--warm-cream)">
                  <p>
                    <strong>3</strong> phrases for expressing tentative opinions
                    that you can remember.
                  </p>
                  <p>
                    <strong>2</strong> vocabulary words for evaluation that were
                    new or useful for you.
                  </p>
                  <p>
                    <strong>1</strong> question you still have, OR thing you
                    feel more confident about now.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <button class="slide-nav slide-nav-prev" aria-label="Previous Slide">
            <i class="fa-solid fa-chevron-left"></i>
          </button>
          <button class="slide-nav slide-nav-next" aria-label="Next Slide">
            <i class="fa-solid fa-chevron-right"></i>
          </button>
        </div>
      </main>
    </div>

    <div
      id="activity-builder-overlay"
      class="builder-overlay"
      aria-hidden="true"
      hidden
    >
      <div class="builder-dialog" role="dialog" aria-modal="true" aria-labelledby="builder-title">
        <header class="builder-header">
          <div>
            <p class="builder-eyebrow">Slide library</p>
            <h2 id="builder-title">Add a blank or templated slide</h2>
            <p class="builder-subtitle">
              Start with an empty canvas or generate a structured slide with ready-to-edit rubric layouts.
            </p>
          </div>
          <button type="button" class="builder-close" aria-label="Close slide builder">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </header>
        <form id="activity-builder-form" class="builder-form">
          <div class="builder-grid">
            <fieldset class="builder-field builder-field--full layout-picker" data-layouts="blank-canvas,facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <legend class="builder-field-label">Choose a layout</legend>
              <div class="layout-picker-grid">
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="blank-canvas" checked />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Blank canvas</span>
                    <span class="layout-option-desc">Add your own text boxes, drawings, and pasted media.</span>
                  </span>
                </label>
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="facilitation" />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Workshop facilitation</span>
                    <span class="layout-option-desc">Stage label, facilitation steps, and rubric side by side.</span>
                  </span>
                </label>
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="rubric-simple" />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Rubric spotlight</span>
                    <span class="layout-option-desc">Title with rubric focus for rapid evidence capture.</span>
                  </span>
                </label>
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="rubric-columns" />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Discussion columns</span>
                    <span class="layout-option-desc">Rubric with two guided discussion columns beneath the title.</span>
                  </span>
                </label>
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="image-spotlight" />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Spotlight + image</span>
                    <span class="layout-option-desc">Narrative column with rubric alongside an inspirational image.</span>
                  </span>
                </label>
                <label class="layout-option">
                  <input type="radio" name="slideLayout" value="rubric-cards" />
                  <span class="layout-option-body">
                    <span class="layout-option-title">Strategy cards</span>
                    <span class="layout-option-desc">Rubric plus three actionable strategy cards for teams.</span>
                  </span>
                </label>
              </div>
            </fieldset>
            <label class="builder-field" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Stage label</span>
              <input
                type="text"
                name="stageLabel"
                placeholder="e.g. Project Workshop · 15 minutes"
                value="Activity Workshop · 15 minutes"
              />
            </label>
            <label class="builder-field" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Activity title</span>
              <input
                type="text"
                name="activityTitle"
                placeholder="What are learners building?"
                value="Design a community impact project"
              />
            </label>
            <label class="builder-field" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Duration</span>
              <input
                type="text"
                name="activityDuration"
                placeholder="e.g. 10 minutes"
                value="10 minutes"
              />
            </label>
            <label class="builder-field builder-field--full" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Slide title</span>
              <input
                type="text"
                name="slideTitle"
                placeholder="Headline for the slide body"
                value="Facilitation steps"
              />
            </label>
            <label class="builder-field builder-field--full" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Slide rubric lead-in</span>
              <textarea
                name="slideRubricLead"
                rows="2"
                placeholder="Describe what evidence learners should capture"
              >Capture evidence for each success criterion as you collaborate.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="facilitation">
              <span class="builder-field-label">Activity overview</span>
              <textarea
                name="activityOverview"
                rows="2"
                placeholder="Why does this activity matter?"
              >Learners review project ideas in small teams and prepare peer feedback.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="facilitation">
              <span class="builder-field-label">Facilitation steps</span>
              <textarea
                name="activitySteps"
                rows="4"
                placeholder="Write one step per line"
              >Group learners in trios and assign each team a project brief.
Give two minutes of silent reading to highlight key information.
Invite teams to complete the rubric together and prepare one insight.
Cold call teams to share the most compelling improvement idea.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-columns">
              <span class="builder-field-label">Column A heading</span>
              <input type="text" name="columnOneHeading" placeholder="Discussion focus" value="Discuss together" />
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-columns">
              <span class="builder-field-label">Column A points (one per line)</span>
              <textarea name="columnOneItems" rows="3" placeholder="List the guiding prompts">Identify a strength you noticed.
Explain why it matters for the community.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-columns">
              <span class="builder-field-label">Column B heading</span>
              <input type="text" name="columnTwoHeading" placeholder="Capture evidence" value="Capture evidence" />
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-columns">
              <span class="builder-field-label">Column B points (one per line)</span>
              <textarea name="columnTwoItems" rows="3" placeholder="List what learners should record">Quote the part of the proposal you are referencing.
Note questions you still have.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="image-spotlight">
              <span class="builder-field-label">Spotlight narrative (each line becomes a paragraph)</span>
              <textarea name="spotlightNarrative" rows="4" placeholder="Share context or reflection">Set the scene for the project you are analysing.
Highlight the aspect that the image represents.
Invite learners to connect evidence back to the rubric.</textarea>
            </label>
            <div class="builder-field builder-field--full image-search" data-layouts="image-spotlight">
              <span class="builder-field-label">Find an image</span>
              <div class="image-search-controls">
                <input type="text" name="imageSearch" placeholder="Search Pexels" />
                <button type="button" class="ghost-btn" data-action="search-image">
                  <i class="fa-solid fa-magnifying-glass"></i>
                  Search
                </button>
              </div>
              <div class="image-search-results" id="builder-image-results" role="listbox" aria-label="Image search results"></div>
              <input type="url" name="imageUrl" placeholder="Or paste an image URL" />
              <input type="text" name="imageAlt" placeholder="Image description for accessibility" />
              <p class="image-search-status" id="image-search-status" aria-live="polite"></p>
            </div>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 1 heading</span>
              <input type="text" name="cardOneHeading" placeholder="Strategy name" value="Plan" />
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 1 description</span>
              <textarea name="cardOneBody" rows="2" placeholder="What should learners do?">Clarify the need you are addressing and list target beneficiaries.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 2 heading</span>
              <input type="text" name="cardTwoHeading" placeholder="Strategy name" value="Prototype" />
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 2 description</span>
              <textarea name="cardTwoBody" rows="2" placeholder="What should learners do?">Sketch how your idea will work in practice and who is involved.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 3 heading</span>
              <input type="text" name="cardThreeHeading" placeholder="Strategy name" value="Evaluate" />
            </label>
            <label class="builder-field builder-field--full" data-layouts="rubric-cards">
              <span class="builder-field-label">Card 3 description</span>
              <textarea name="cardThreeBody" rows="2" placeholder="What should learners do?">List evidence that shows impact and note the data you still need.</textarea>
            </label>
            <label class="builder-field builder-field--full" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
              <span class="builder-field-label">Performance levels (comma separated)</span>
              <input
                type="text"
                name="rubricLevels"
                placeholder="Emerging, Meeting, Excelling"
                value="Emerging, Meeting, Excelling"
              />
            </label>
          </div>

          <section
            class="builder-section"
            data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards"
            data-role="rubric-section"
          >
            <header class="builder-section-header">
              <div>
                <h3>Rubric prompts</h3>
                <p>List the evidence you want learners to capture.</p>
              </div>
              <label class="builder-toggle">
                <input
                  type="checkbox"
                  name="includeRubric"
                  value="true"
                  checked
                />
                <span>Include success criteria</span>
              </label>
              <button
                type="button"
                id="builder-add-prompt"
                class="activity-btn"
              >
                <i class="fa-solid fa-plus"></i>
                Add criterion
              </button>
            </header>
            <ul id="builder-prompt-list" class="builder-prompt-list"></ul>
          </section>

          <section class="builder-section builder-preview-section" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
            <header class="builder-section-header">
              <div>
                <h3>Slide preview</h3>
                <p>Updates automatically as you edit the fields.</p>
              </div>
              <button type="button" class="ghost-btn" id="builder-refresh-preview">
                <i class="fa-solid fa-arrows-rotate"></i>
                Refresh preview
              </button>
            </header>
            <div id="builder-preview" class="builder-preview" aria-live="polite"></div>
          </section>

          <section class="builder-section" data-layouts="facilitation,rubric-simple,rubric-columns,image-spotlight,rubric-cards">
            <header class="builder-section-header">
              <div>
                <h3>Rubric JSON</h3>
                <p>The generated structure is copied into the slide for future edits.</p>
              </div>
            </header>
            <pre
              id="builder-json-preview"
              class="builder-json-preview"
              aria-live="polite"
            >{
  "criteria": []
}</pre>
          </section>

          <footer class="builder-footer">
            <p id="builder-status" class="builder-status" aria-live="polite"></p>
            <div class="builder-actions">
              <button type="button" class="toolbar-btn ghost" data-action="cancel-builder">
                Cancel
              </button>
              <button type="submit" class="toolbar-btn">
                <i class="fa-solid fa-square-plus"></i>
                Insert slide
              </button>
            </div>
          </footer>
        </form>
      </div>
    </div>

    <div
      id="module-builder-overlay"
      class="builder-overlay module-builder-overlay"
      aria-hidden="true"
      hidden
    >
      <div
        class="builder-dialog module-builder-dialog"
        role="dialog"
        aria-modal="true"
        aria-labelledby="module-builder-title"
      >
        <header class="builder-header module-builder-header">
          <div>
            <p class="builder-eyebrow">Sandbox tools</p>
            <h2 id="module-builder-title">Interactive Activity Modules</h2>
            <p class="builder-subtitle">
              Configure Noor templates and drop the activity onto your blank slide.
            </p>
          </div>
          <button
            type="button"
            class="builder-close module-builder-close"
            aria-label="Close module builder"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </header>
        <div class="module-builder-body">
          <iframe
            id="module-builder-frame"
            title="Activity module builder"
            src="about:blank"
            data-builder-src="../activity-builder.html"
            loading="lazy"
            tabindex="-1"
          ></iframe>
        </div>
      </div>
    </div>


    <script type="module">
      import { setupInteractiveDeck } from "../int-mod.js";
      setupInteractiveDeck();
    </script>

    <script>
      (() => {
        const inlineTagNames = new Set([
          "A",
          "ABBR",
          "B",
          "BDI",
          "BDO",
          "BR",
          "CITE",
          "CODE",
          "DATA",
          "DFN",
          "EM",
          "I",
          "KBD",
          "MARK",
          "Q",
          "S",
          "SAMP",
          "SMALL",
          "SPAN",
          "STRONG",
          "SUB",
          "SUP",
          "TIME",
          "U",
          "VAR",
          "WBR",
          "SVG",
          "USE",
          "PATH",
        ]);

        const excludedTagNames = new Set([
          "BUTTON",
          "INPUT",
          "SELECT",
          "OPTION",
          "TEXTAREA",
          "SCRIPT",
          "STYLE",
          "IMG",
          "VIDEO",
          "AUDIO",
          "CANVAS",
          "IFRAME",
          "OBJECT",
          "EMBED",
        ]);

        const editableElements = [];
        const editableSet = new Set();

        const isInlineElement = (el) => inlineTagNames.has(el.tagName);

        const hasOnlyInlineChildren = (el) =>
          Array.from(el.children).every((child) =>
            isInlineElement(child) ||
            child.matches("[data-editable-ignore], [contenteditable='false']")
          );

        const shouldMakeEditable = (el) => {
          if (!el) return false;
          if (!el.closest(".slide-stage")) return false;
          if (el.closest("[data-editable-ignore]")) return false;
          if (el.dataset.editableProcessed === "true") return false;
          if (excludedTagNames.has(el.tagName)) return false;
          if (el.matches("button, [role='button'], select, option, textarea, input")) {
            return false;
          }
          if (el.matches("a[href]")) return false;
          if (!el.textContent || !el.textContent.trim()) return false;
          if (el.classList.contains("sr-only")) return false;
          if (el.childElementCount > 0 && !hasOnlyInlineChildren(el)) {
            return false;
          }
          return true;
        };

        const storeMetrics = (el, force = false) => {
          const style = window.getComputedStyle(el);
          const baseFont = parseFloat(style.fontSize) || 16;
          if (force || !el.dataset.baseFontSize) {
            el.dataset.baseFontSize = baseFont;
            el.dataset.minFontSize = Math.max(8, Math.round(baseFont * 0.5));
          }

          const rect = el.getBoundingClientRect();
          if (
            (force || !el.dataset.maxWidth || !el.dataset.maxHeight) &&
            rect.width > 0 &&
            rect.height > 0
          ) {
            el.dataset.maxWidth = rect.width;
            el.dataset.maxHeight = rect.height;
          }
        };

        const autoFit = (el) => {
          storeMetrics(el);
          const base = parseFloat(el.dataset.baseFontSize) ||
            parseFloat(window.getComputedStyle(el).fontSize) ||
            16;
          const min = parseFloat(el.dataset.minFontSize) || Math.max(8, Math.round(base * 0.5));
          let width = parseFloat(el.dataset.maxWidth) || 0;
          let height = parseFloat(el.dataset.maxHeight) || 0;

          if ((!width || !height) && el.offsetParent) {
            const rect = el.getBoundingClientRect();
            if (rect.width > 0 && rect.height > 0) {
              width = rect.width;
              height = rect.height;
              el.dataset.maxWidth = width;
              el.dataset.maxHeight = height;
            }
          }

          el.style.fontSize = `${base}px`;
          el.style.overflow = "hidden";

          if (!width || !height || width < 4 || height < 4) {
            return;
          }

          const tolerance = 1;
          let fontSize = base;
          let iterations = 0;
          let overflow =
            el.scrollHeight > height + tolerance || el.scrollWidth > width + tolerance;

          while (overflow && fontSize > min && iterations < 200) {
            fontSize -= 0.5;
            el.style.fontSize = `${fontSize}px`;
            iterations += 1;
            overflow =
              el.scrollHeight > height + tolerance ||
              el.scrollWidth > width + tolerance;
          }

          if (overflow) {
            el.dataset.overflow = "true";
            el.title = "Text truncated to preserve layout.";
          } else {
            delete el.dataset.overflow;
            if (el.title === "Text truncated to preserve layout.") {
              el.removeAttribute("title");
            }
          }
        };

        const initEditableText = () => {
          const iconElements = document.querySelectorAll(
            ".slide-stage i, .slide-stage .fa"
          );
          iconElements.forEach((icon) => {
            icon.setAttribute("contenteditable", "false");
            icon.setAttribute("data-editable-ignore", "true");
          });

          const candidates = Array.from(document.querySelectorAll(".slide-stage *"))
            .filter((el) => shouldMakeEditable(el));

          candidates.forEach((el) => {
            el.dataset.editableProcessed = "true";
            el.classList.add("editable-text");
            el.setAttribute("contenteditable", "true");
            el.setAttribute("spellcheck", "false");
            if (!el.hasAttribute("tabindex")) {
              el.setAttribute("tabindex", "0");
            }
            el.style.overflow = "hidden";

            el.addEventListener("focus", () => {
              storeMetrics(el, true);
              autoFit(el);
            });

            el.addEventListener("input", () => {
              autoFit(el);
            });

            el.addEventListener("blur", () => {
              autoFit(el);
            });

            const mutationObserver = new MutationObserver(() => {
              autoFit(el);
            });

            mutationObserver.observe(el, {
              characterData: true,
              childList: true,
              subtree: true,
            });

            editableElements.push(el);
            editableSet.add(el);
          });

          editableElements.forEach((el) => {
            storeMetrics(el, true);
            autoFit(el);
          });

          if ("ResizeObserver" in window) {
            const resizeObserver = new ResizeObserver((entries) => {
              entries.forEach((entry) => {
                const el = entry.target;
                if (!editableSet.has(el)) return;
                storeMetrics(el, true);
                autoFit(el);
              });
            });

            editableElements.forEach((el) => resizeObserver.observe(el));
          } else {
            window.addEventListener("resize", () => {
              editableElements.forEach((el) => {
                storeMetrics(el, true);
                autoFit(el);
              });
            });
          }
        };

        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initEditableText);
        } else {
          initEditableText();
        }
      })();
    </script>

  </body>
</html>
