<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C1 Final Assessment: Applying Critical Thinking to Global Development Challenges</title>

    <!-- 1. Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Questrial&display=swap" rel="stylesheet">

    <!-- 2. Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- 3. Embedded CSS Theme from Reference Implementation -->
    <style>
        /* =====================================================================
           Noor Community Activities â€” Enhanced UI System
           Refined version of the Organic Sage visual language.
           ===================================================================== */

        /* -------------------------------
           Design Tokens
        ----------------------------------*/
        :root {
          /* Core Palette */
          --primary-sage: #7a8471;
          --secondary-sage: #9caf88;
          --tertiary-sage: #b8c5a6;
          --warm-cream: #f8f6f0;
          --soft-white: #fefcf7;
          --forest-shadow: #5a6b52;
          --ink: #2f3a2b;
          --ink-muted: #5a6b52;
          --border-sage: rgba(122, 132, 113, 0.2);
          --hover-sage: rgba(156, 175, 136, 0.15);

          /* Extended Palette */
          --deep-forest: #3e4a3a;
          --moss: #6e7a67;
          --amber: #c6aa77;

          /* Typography */
          --font-display: "Questrial", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
          --font-body: "Nunito", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
          --font-size-adjustment: 0rem;
          --step--1: calc(clamp(0.875rem, 0.82rem + 0.18vw, 0.95rem) + var(--font-size-adjustment));
          --step-0:  calc(clamp(1rem, 0.94rem + 0.28vw, 1.1rem) + var(--font-size-adjustment));
          --step-1:  calc(clamp(1.125rem, 1.04rem + 0.42vw, 1.32rem) + var(--font-size-adjustment));
          --step-2:  calc(clamp(1.35rem, 1.18rem + 0.68vw, 1.65rem) + var(--font-size-adjustment));
          --step-3:  calc(clamp(1.75rem, 1.42rem + 1.1vw, 2.1rem) + var(--font-size-adjustment));
          --step-4:  calc(clamp(2.25rem, 1.8rem + 1.65vw, 2.75rem) + var(--font-size-adjustment));

          /* Rhythm & Spacing */
          --space-1: 0.25rem;
          --space-2: 0.5rem;
          --space-3: 0.75rem;
          --space-4: 1rem;
          --space-5: 1.25rem;
          --space-6: 1.5rem;
          --space-7: 2rem;
          --space-8: 2.5rem;
          --space-9: 3rem;

          /* Shape & Elevation */
          --radius-sm: 10px;
          --radius: 16px;
          --radius-lg: 20px;
          --radius-xl: 28px;
          --shadow-1: 0 1px 2px rgba(34, 41, 32, 0.05), 0 2px 8px rgba(34, 41, 32, 0.06);
          --shadow-2: 0 4px 18px rgba(34, 41, 32, 0.08), 0 12px 28px rgba(34, 41, 32, 0.06);
          --shadow-3: 0 10px 40px rgba(34, 41, 32, 0.1), 0 20px 60px rgba(34, 41, 32, 0.08);
          --ring: 0 0 0 3px color-mix(in oklab, var(--soft-white) 60%, transparent),
                   0 0 0 5px color-mix(in srgb, var(--secondary-sage) 85%, #2f3a2b 15%);

          /* Motion */
          --ease-out: cubic-bezier(.2,.8,.2,1);
          --transition-fast: 150ms var(--ease-out);
          --transition-std: 250ms var(--ease-out);

          /* Layout */
          --target-min: 44px;
          --container-max: clamp(320px, 92vw, 940px);
          --container-padding: clamp(1.25rem, 5vw, 2rem);
        }

        /* -------------------------------
           Global Reset & Base Styles
        ----------------------------------*/
        *, *::before, *::after { box-sizing: border-box; }
        html { text-size-adjust: 100%; scroll-behavior: smooth; }
        body { margin: 0; min-height: 100dvh; font-family: var(--font-body); font-size: var(--step-0); line-height: 1.6; color: var(--ink); background: var(--warm-cream); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; overflow-x: hidden; }
        :where(p, h1, h2, h3, h4, h5, h6) { text-wrap: pretty; overflow-wrap: break-word; }
        :where(h1, h2, h3) { text-wrap: balance; }

        /* -------------------------------
           Typography & Layout
        ----------------------------------*/
        .container { width: 100%; max-width: var(--container-max); margin: 0 auto; padding: 0 var(--container-padding); }
        h1 { font-family: var(--font-display); font-size: var(--step-4); color: var(--forest-shadow); text-align: center; line-height: 1.1; margin: 0 0 var(--space-3); }
        h2 { font-family: var(--font-display); font-size: var(--step-3); color: var(--forest-shadow); margin: var(--space-7) 0 var(--space-4); }
        h3 { font-family: var(--font-display); font-size: var(--step-2); color: var(--forest-shadow); margin: 0 0 var(--space-3); letter-spacing: 0.02em; }
        
        /* -------------------------------
           Buttons
        ----------------------------------*/
        .activity-btn { min-height: var(--target-min); padding: 0.75rem clamp(1.2rem, 4vw, 1.75rem); border-radius: 999px; border: 1px solid color-mix(in srgb, var(--primary-sage) 65%, #fff 35%); background: linear-gradient(180deg, var(--primary-sage), var(--deep-forest)); color: #fff; font-weight: 700; font-size: var(--step-0); letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 0.6rem; -webkit-tap-highlight-color: transparent; transition: transform var(--transition-fast), box-shadow var(--transition-std), background var(--transition-std); box-shadow: var(--shadow-1); }
        .activity-btn:hover { transform: scale(1.02); box-shadow: var(--shadow-2); background: linear-gradient(180deg, var(--moss), var(--deep-forest)); }
        .activity-btn:active { transform: scale(0.98); }
        .activity-btn:focus-visible { outline: none; box-shadow: var(--ring), var(--shadow-2); transform: scale(1.02); }
        .activity-btn:disabled { background: var(--tertiary-sage); border-color: color-mix(in srgb, var(--tertiary-sage) 80%, #fff 20%); color: color-mix(in srgb, #fff 85%, var(--soft-white) 15%); cursor: not-allowed; opacity: 0.85; transform: none; box-shadow: none; }

        .reset-btn { background: transparent; color: var(--deep-forest); border: 1px solid var(--secondary-sage); box-shadow: none; text-transform: none; letter-spacing: 0; font-weight: 700; }
        .reset-btn:hover { background: var(--hover-sage); color: var(--ink); box-shadow: var(--shadow-1); }

        /* -------------------------------
           Multiple Choice Question Styles
        ----------------------------------*/
        .mc-question { padding: clamp(1.25rem, 4vw, 1.75rem); border-radius: var(--radius); border: 1px solid var(--border-sage); background: linear-gradient(180deg, #fff, color-mix(in srgb, #fff 90%, var(--warm-cream) 10%)); box-shadow: var(--shadow-1); margin-bottom: var(--space-6); }
        .mc-question-text { font-weight: 700; font-size: var(--step-1); color: var(--forest-shadow); line-height: 1.45; margin: 0 0 var(--space-5); }
        .mc-options-container { display: flex; flex-direction: column; gap: var(--space-3); }
        .mc-option-item input { display: none; }
        .mc-option-label { display: flex; align-items: center; gap: var(--space-3); cursor: pointer; padding: 0.75rem 1rem; border-radius: var(--radius-sm); border: 1px solid var(--border-sage); background: color-mix(in srgb, var(--soft-white) 92%, #fff 8%); transition: all var(--transition-std); -webkit-tap-highlight-color: transparent; }
        .mc-option-label:hover { background: var(--hover-sage); border-color: color-mix(in srgb, var(--secondary-sage) 50%, transparent); }
        .mc-option-label .option-control { flex-shrink: 0; width: 24px; height: 24px; border: 2px solid var(--tertiary-sage); background-color: var(--soft-white); transition: all var(--transition-std); position: relative; border-radius: 50%; box-shadow: inset 0 1px 0 rgba(255,255,255,0.7); }
        .mc-option-label.locked { cursor: not-allowed; background: var(--hover-sage); opacity: 0.8; }
        .mc-option-item input:checked + .mc-option-label .option-control { border-color: var(--primary-sage); background-color: var(--primary-sage); }
        .mc-option-item input:checked + .mc-option-label .option-control::after { content: ''; position: absolute; inset: 4px; border-radius: 50%; background-color: #fff; }
        .mc-option-item input:focus-visible + .mc-option-label { outline: none; box-shadow: var(--ring); }
        .mc-option-label:has(input:checked) { border-color: var(--primary-sage); background: color-mix(in srgb, var(--hover-sage) 30%, #fff 70%); }
        .mc-option-label:has(input:checked) .mc-option-text { color: var(--deep-forest); font-weight: 600; }

        /* -------------------------------
           Assessment-Specific Custom Styles
        ----------------------------------*/
        .assessment-container { display: none; }
        #student-id-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px); }
        #student-id-box { background: var(--soft-white); padding: var(--space-8); border-radius: var(--radius-lg); text-align: center; box-shadow: var(--shadow-3); width: 90%; max-width: 400px; }
        #student-id-box h2 { margin-top: 0; color: var(--primary-sage); font-family: var(--font-display); }
        #student-id-input { width: 100%; padding: var(--space-3); margin: var(--space-5) 0; border: 1px solid var(--border-sage); border-radius: var(--radius-sm); font-size: var(--step-0); }

        .timer-bar { position: sticky; top: 0; width: 100%; background-color: var(--deep-forest); color: var(--soft-white); padding: var(--space-3) var(--space-4); text-align: center; font-weight: 700; z-index: 999; box-shadow: var(--shadow-2); }
        #countdown-timer { background-color: var(--amber); color: var(--deep-forest); padding: var(--space-1) var(--space-2); border-radius: 6px; margin-left: var(--space-2); }
        
        .hero-section { position: relative; background-size: cover; background-position: center; padding: clamp(3rem, 10vw, 6rem) 1.5rem; text-align: center; color: white; }
        .hero-overlay { position: absolute; inset: 0; background-color: rgba(0, 0, 0, 0.5); }
        .hero-content { position: relative; z-index: 2; }
        .hero-section h1 { color: white; font-size: var(--step-4); }
        .pills { display: flex; justify-content: center; gap: var(--space-3); margin-top: var(--space-4); flex-wrap: wrap; }
        .pill { display: inline-block; padding: var(--space-2) var(--space-4); border-radius: 999px; font-size: var(--step--1); font-weight: 600; background-color: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px); }
        
        .assessment-section { margin-bottom: var(--space-8); }
        .instructions { color: var(--ink-muted); font-style: italic; text-align: center; margin-bottom: var(--space-6); }
        .activity-card { background: var(--soft-white); border-radius: var(--radius); padding: var(--space-6); margin-bottom: var(--space-6); box-shadow: var(--shadow-1); border: 1px solid var(--border-sage); }
        .activity-card h3 { color: var(--primary-sage); margin-top: 0; border-bottom: 2px solid var(--hover-sage); padding-bottom: var(--space-2); font-size: var(--step-2); }
        .reading-passage { background-color: color-mix(in srgb, var(--warm-cream) 50%, var(--soft-white) 50%); padding: var(--space-6); border-radius: var(--radius); border: 1px solid var(--border-sage); margin-bottom: var(--space-6); line-height: 1.7; }

        .dropdown-question { margin-bottom: var(--space-4); }
        .dropdown-question select { padding: var(--space-2); border-radius: var(--radius-sm); border: 1px solid var(--tertiary-sage); background-color: var(--soft-white); cursor: pointer; font-family: var(--font-body); font-size: var(--step-0); }
        
        .matching-container { display: flex; flex-direction: column; gap: var(--space-6); }
        @media (min-width: 600px) { .matching-container { flex-direction: row; justify-content: space-between; } }
        .matching-column { width: 100%; }
        @media (min-width: 600px) { .matching-column { width: 48%; } }
        .matching-column ul { list-style: none; padding: 0; margin: 0; }
        .matching-column li { padding: var(--space-3); border: 1px solid var(--border-sage); border-radius: var(--radius-sm); margin-bottom: var(--space-2); cursor: pointer; transition: background-color var(--transition-std), color var(--transition-std); }
        .matching-column li:hover { background-color: var(--hover-sage); }
        .matching-column li.selected { background-color: var(--amber); color: var(--deep-forest); border-color: var(--amber); }

        .matching-column li.matched-pair-1 { background-color: #f9c74f; color: #57451b; border-color: #57451b; }
        .matching-column li.matched-pair-2 { background-color: #90be6d; color: #283618; border-color: #283618; }
        .matching-column li.matched-pair-3 { background-color: #b5a3c8; color: #3e324d; border-color: #3e324d; }
        .matching-column li.matched-pair-4 { background-color: #e5989b; color: #5e3c3d; border-color: #5e3c3d; }
        .matching-column li.matched-pair-5 { background-color: #56cfe1; color: #1a3f45; border-color: #1a3f45; }
        .matching-column li.matched-pair-6 { background-color: #fca311; color: #4d3105; border-color: #4d3105; }

        /* Feedback styling */
        .feedback-correct { background-color: #d4edda !important; border-color: #c3e6cb !important; }
        .feedback-incorrect { background-color: #f8d7da !important; border-color: #f5c6cb !important; }
        .correct-answer-text { color: #155724; font-weight: bold; margin-left: var(--space-2); }
        .mc-option-label.feedback-correct { border-color: #155724 !important; background: #d4edda !important; }
        .mc-option-label.feedback-incorrect { border-color: #721c24 !important; background: #f8d7da !important; }

        #submission-area { text-align: center; margin-top: var(--space-7); }
        #submission-feedback { display: none; padding: var(--space-6); margin-top: var(--space-7); border-radius: var(--radius); text-align: center; }
        #submission-feedback.success { background-color: #d4edda; color: #155724; }
        #submission-feedback.error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>

    <div id="student-id-modal">
        <div id="student-id-box">
            <h2>Final Assessment</h2>
            <p>Please enter your numeric Student ID to begin.</p>
            <input type="text" id="student-id-input" placeholder="e.g., 202412345" inputmode="numeric" pattern="[0-9]*">
            <button id="start-assessment-btn" class="activity-btn" disabled>Start Assessment</button>
        </div>
    </div>

    <div class="assessment-container">
        <div class="timer-bar">
            Time Remaining: <span id="countdown-timer">60:00</span>
        </div>

        <header class="hero-section" style="background-image: url('https://images.pexels.com/photos/7233117/pexels-photo-7233117.jpeg?auto=compress&cs=tinysrgb&h=900&w=1600');">
            <div class="hero-overlay"></div>
            <div class="hero-content container">
                <h1>Final Assessment</h1>
                <div class="pills">
                    <span class="pill">Level: C1</span>
                    <span class="pill">Unit Theme: Applying Critical Thinking to Global Development Challenges</span>
                </div>
            </div>
        </header>

        <main class="container" style="padding-top: 2rem;">

            <section class="assessment-section">
                <h2>Listening Comprehension</h2>
                <p class="instructions">Listen to a conversation between Dana, a project manager in Ramallah, and Simon, a representative from a donor agency in Brussels. You will hear the audio twice. Answer the questions that follow.</p>
                
                <audio controls style="width: 100%; margin-bottom: 1.5rem;">
                    <source src="https://najma-collective.github.io/Noor-Community-/C1/1/EOM/download%20(14).wav" type="audio/wav">
                    Your browser does not support the audio element.
                </audio>

                <div class="activity-card">
                    <h3>Activity 1: Main Ideas</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Listen to the conversation and choose the main reason for Simon's call.</p>
                    <div class="mc-question" data-question-id="1.1" data-correct-answer="c">
                        <p class="mc-question-text">1. What is the primary purpose of Simon's phone call?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q1.1" value="a" id="q1.1a"><label for="q1.1a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) To congratulate Dana on the project's success.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q1.1" value="b" id="q1.1b"><label for="q1.1b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) To inform Dana that the project's funding has been cut.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q1.1" value="c" id="q1.1c"><label for="q1.1c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) To convey the donor's concerns about the project's long-term strategy.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q1.1" value="d" id="q1.1d"><label for="q1.1d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) To request a new project proposal for a different city.</span></label></div>
                        </div>
                    </div>
                </div>

                <div class="activity-card">
                    <h3>Activity 2: Detailed Understanding</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Listen again and choose the best answer for each question.</p>
                    <div class="mc-question" data-question-id="2.1" data-correct-answer="b">
                        <p class="mc-question-text">1. What is the donor's main concern about the project's finances?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q2.1" value="a" id="q2.1a"><label for="q2.1a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) The budget is too high.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.1" value="b" id="q2.1b"><label for="q2.1b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) The project may not be able to support itself in the future.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.1" value="c" id="q2.1c"><label for="q2.1c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) The funds are not being spent correctly.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.1" value="d" id="q2.1d"><label for="q2.1d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) The quarterly report was missing financial details.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="2.2" data-correct-answer="b">
                        <p class="mc-question-text">2. How does Simon use a mixed conditional to express regret about the past?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q2.2" value="a" id="q2.2a"><label for="q2.2a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) He says that if the plan were better, they would have had an easier conversation.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.2" value="b" id="q2.2b"><label for="q2.2b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) He says that if the initial plan had been stronger, they wouldn't be in this situation now.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.2" value="c" id="q2.2c"><label for="q2.2c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) He says that if they change the plan, the conversation will be better.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.2" value="d" id="q2.2d"><label for="q2.2d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) He says that if they had this conversation sooner, the plan would have been better.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="2.3" data-correct-answer="b">
                        <p class="mc-question-text">3. What specific suggestion did the donor's board make?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q2.3" value="a" id="q2.3a"><label for="q2.3a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) To close the hub in Bethlehem.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.3" value="b" id="q2.3b"><label for="q2.3b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) To seek a partnership with a company in Amman.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.3" value="c" id="q2.3c"><label for="q2.3c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) To reduce the project timeline.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.3" value="d" id="q2.3d"><label for="q2.3d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) To focus only on mentorship.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="2.4" data-correct-answer="c">
                        <p class="mc-question-text">4. What is the second major concern raised by the donor?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q2.4" value="a" id="q2.4a"><label for="q2.4a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) The project's impact on beneficiaries.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.4" value="b" id="q2.4b"><label for="q2.4b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) The lack of qualified staff.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.4" value="c" id="q2.4c"><label for="q2.4c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) The project's potential to be replicated elsewhere.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.4" value="d" id="q2.4d"><label for="q2.4d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) The engagement with local stakeholders.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="2.5" data-correct-answer="d">
                        <p class="mc-question-text">5. What does Simon ask Dana to do next?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q2.5" value="a" id="q2.5a"><label for="q2.5a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) Organize a meeting with the board.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.5" value="b" id="q2.5b"><label for="q2.5b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) Stop the project immediately.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.5" value="c" id="q2.5c"><label for="q2.5c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) Send a new budget proposal.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q2.5" value="d" id="q2.5d"><label for="q2.5d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) Address the concerns in the next written report.</span></label></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="assessment-section">
                <h2>Reading Comprehension & Functional Language</h2>
                <p class="instructions">Read the formal project update report and answer the questions.</p>
                <div class="reading-passage">
                    <p><strong>Subject: Progress Report Q3 - Jericho Digital Heritage Initiative</strong></p>
                    <p><strong>To:</strong> European Development Fund<br>
                    <strong>From:</strong> Palestinian Heritage NGO, Ramallah<br>
                    <strong>Date:</strong> 25 October 2025</p>
                    <p><strong>1. Introduction</strong><br>
                    This report outlines the progress for the Jericho Digital Heritage Initiative for the third quarter. Subsequently, it addresses the key challenge regarding stakeholder engagement that was raised in your correspondence dated 1 October.</p>
                    <p><strong>2. Progress Update</strong><br>
                    The procurement of 3D scanning equipment is complete, and the training of local university students as technicians has been successfully implemented. The team has begun digitizing the first two archaeological sites.</p>
                    <p><strong>3. Addressing Challenges: Stakeholder Engagement</strong><br>
                    In response to the feedback concerning a perceived lack of engagement with local community elders, we have rectified the situation. It was alleged that the project was overly academic. To mitigate this, a series of consultation meetings were organized. Consequently, the project plan has been amended to better integrate oral histories. What is crucial now is ensuring this collaborative spirit is maintained. The proposed course of action is twofold: first, to establish a permanent Community Advisory Board, and second, to co-host a public exhibition of the project's findings with the local municipality. If we had established this board from the start, community alignment would be stronger today.</p>
                    <p><strong>4. Next Steps</strong><br>
                    The next quarter will focus on expanding the digitization work and formally launching the Community Advisory Board. A full list of board members will be included in the Q4 report.</p>
                </div>

                <div class="activity-card">
                    <h3>Activity 3: Understanding the Report</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Read the report and choose the best answer for each question.</p>
                    <div class="mc-question" data-question-id="3.1" data-correct-answer="d">
                        <p class="mc-question-text">1. What is the main purpose of section 3 of the report?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q3.1" value="a" id="q3.1a"><label for="q3.1a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) To request additional funding for equipment.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.1" value="b" id="q3.1b"><label for="q3.1b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) To describe the technical progress of the digitization.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.1" value="c" id="q3.1c"><label for="q3.1c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) To outline the project's next steps and future goals.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.1" value="d" id="q3.1d"><label for="q3.1d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) To respond to criticism about community involvement.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="3.2" data-correct-answer="c">
                        <p class="mc-question-text">2. According to the text, what action was taken to solve the main challenge?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q3.2" value="a" id="q3.2a"><label for="q3.2a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) The project was temporarily stopped.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.2" value="b" id="q3.2b"><label for="q3.2b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) New academic partners were found.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.2" value="c" id="q3.2c"><label for="q3.2c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) Meetings with community elders were held.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.2" value="d" id="q3.2d"><label for="q3.2d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) The budget for technology was increased.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="3.3" data-correct-answer="b">
                        <p class="mc-question-text">3. What does the phrase "The proposed course of action is twofold" mean?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q3.3" value="a" id="q3.3a"><label for="q3.3a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) The action is very difficult to implement.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.3" value="b" id="q3.3b"><label for="q3.3b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) There are two parts to the proposed plan.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.3" value="c" id="q3.3c"><label for="q3.3c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) The action will be repeated two times.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.3" value="d" id="q3.3d"><label for="q3.3d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) Two different teams have proposed the action.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="3.4" data-correct-answer="c">
                        <p class="mc-question-text">4. The sentence "What is crucial now is ensuring this collaborative spirit is maintained" is an example of a cleft sentence. Why is it used here?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q3.4" value="a" id="q3.4a"><label for="q3.4a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) To ask a question about the collaborative spirit.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.4" value="b" id="q3.4b"><label for="q3.4b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) To minimize the importance of collaboration.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.4" value="c" id="q3.4c"><label for="q3.4c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) To emphasize the most important priority.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.4" value="d" id="q3.4d"><label for="q3.4d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) To report something somebody else said.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="3.5" data-correct-answer="b">
                        <p class="mc-question-text">5. What does the report suggest about the past?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q3.5" value="a" id="q3.5a"><label for="q3.5a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) The Community Advisory Board was a success from the beginning.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.5" value="b" id="q3.5b"><label for="q3.5b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) The relationship with the community would be better now if the board had been created earlier.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.5" value="c" id="q3.5c"><label for="q3.5c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) The project never had any problems with community alignment.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q3.5" value="d" id="q3.5d"><label for="q3.5d" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">d) The local municipality refused to co-host an exhibition.</span></label></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="assessment-section">
                <h2>Vocabulary</h2>
                <p class="instructions">These activities test the vocabulary for project evaluation, negotiation, and reporting.</p>
                <div class="activity-card" data-activity-type="matching">
                    <h3>Activity 4: Matching Definitions</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Match the vocabulary words with their correct definitions.</p>
                    <div class="matching-container">
                        <div class="matching-column">
                            <h4>Column A</h4>
                            <ul id="match-col-a">
                                <li data-match-id="1">1. viable</li>
                                <li data-match-id="2">2. contingency</li>
                                <li data-match-id="3">3. to synthesize</li>
                                <li data-match-id="4">4. shortcomings</li>
                                <li data-match-id="5">5. concession</li>
                                <li data-match-id="6">6. to mitigate</li>
                            </ul>
                        </div>
                        <div class="matching-column">
                            <h4>Column B</h4>
                            <ul id="match-col-b">
                                <li data-match-id="2">a) A plan for a possible future problem.</li>
                                <li data-match-id="4">b) Weaknesses or faults.</li>
                                <li data-match-id="5">c) Something you agree to give or allow in a negotiation.</li>
                                <li data-match-id="1">d) Capable of working successfully; feasible.</li>
                                <li data-match-id="6">e) To make a bad situation less severe.</li>
                                <li data-match-id="3">f) To combine different ideas or pieces of information to create a whole.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="activity-card">
                    <h3>Activity 5: Vocabulary in Context</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Read the sentences and choose the best word to complete each one.</p>
                    <div class="dropdown-question" data-correct-answer="consensus">1. After a long debate, the committee finally reached a <select name="q5.1"><option value="">--</option><option value="consensus">consensus</option><option value="deadlock">deadlock</option><option value="trade-off">trade-off</option></select> and approved the new strategy.</div>
                    <div class="dropdown-question" data-correct-answer="stakeholders">2. We must consult with all community <select name="q5.2"><option value="">--</option><option value="beneficiaries">beneficiaries</option><option value="stakeholders">stakeholders</option><option value="constraints">constraints</option></select>, including local businesses and residents, before launching the project.</div>
                    <div class="dropdown-question" data-correct-answer="scalable">3. A key question is whether the project is <select name="q5.3"><option value="">--</option><option value="scalable">scalable</option><option value="leverage">leverage</option><option value="impact">impact</option></select>; can we replicate it in other cities?</div>
                    <div class="dropdown-question" data-correct-answer="implications">4. Before making a decision, we must consider the long-term <select name="q5.4"><option value="">--</option><option value="implications">implications</option><option value="divergence">divergence</option><option value="alignment">alignment</option></select> of this pivot.</div>
                    <div class="dropdown-question" data-correct-answer="convey">5. The manager asked me to <select name="q5.5"><option value="">--</option><option value="rectify">rectify</option><option value="address">address</option><option value="convey">convey</option></select> the key takeaways from the meeting to the rest of the team.</div>
                </div>
            </section>

            <section class="assessment-section">
                <h2>Grammar</h2>
                <p class="instructions">These activities test grammar for expressing nuance, discussing hypothetical situations, and structuring formal communication.</p>
                <div class="activity-card">
                    <h3>Activity 6: Expressing Nuance</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Choose the best option to complete the sentences, using nuanced and objective language suitable for a professional context.</p>
                    <div class="mc-question" data-question-id="6.1" data-correct-answer="c">
                        <p class="mc-question-text">1. The feedback was negative. The donor ______ that the project's marketing was ineffective.</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q6.1" value="a" id="q6.1a"><label for="q6.1a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) stated for a fact</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.1" value="b" id="q6.1b"><label for="q6.1b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) proved</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.1" value="c" id="q6.1c"><label for="q6.1c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) insinuated</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="6.2" data-correct-answer="b">
                        <p class="mc-question-text">2. "The budget is unrealistic." (Rephrase this diplomatically)</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q6.2" value="a" id="q6.2a"><label for="q6.2a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) It is impossible that the budget is realistic.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.2" value="b" id="q6.2b"><label for="q6.2b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) One might argue that the budget seems overly ambitious.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.2" value="c" id="q6.2c"><label for="q6.2c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) The budget is clearly wrong and must be changed.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="6.3" data-correct-answer="c">
                        <p class="mc-question-text">3. To maintain objectivity in the report, which sentence is best?</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q6.3" value="a" id="q6.3a"><label for="q6.3a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) I think they should increase community participation.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.3" value="b" id="q6.3b"><label for="q6.3b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) They told us to increase community participation.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.3" value="c" id="q6.3c"><label for="q6.3c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) It was suggested that community participation should be increased.</span></label></div>
                        </div>
                    </div>
                    <div class="mc-question" data-question-id="6.4" data-correct-answer="a">
                        <p class="mc-question-text">4. "The timeline is too short." (Rephrase this using hedging language)</p>
                        <div class="mc-options-container">
                            <div class="mc-option-item"><input type="radio" name="q6.4" value="a" id="q6.4a"><label for="q6.4a" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">a) There appears to be some concern about the feasibility of the timeline.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.4" value="b" id="q6.4b"><label for="q6.4b" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">b) The timeline is definitely not going to work.</span></label></div>
                            <div class="mc-option-item"><input type="radio" name="q6.4" value="c" id="q6.4c"><label for="q6.4c" class="mc-option-label"><span class="option-control"></span><span class="mc-option-text">c) My firm conclusion is that the timeline is wrong.</span></label></div>
                        </div>
                    </div>
                </div>

                <div class="activity-card">
                    <h3>Activity 7: Conditionals and Connectors</h3>
                    <p class="instructions" style="text-align:left; font-style:normal;">Read the text from a project report and choose the correct words to complete the sentences.</p>
                    <div class="dropdown-question" data-correct-answer="had been issued,wouldn't be">1. The project is currently facing a significant delay. If the construction permits <select name="q7.1.1"><option value="">--</option><option value="were issued">were issued</option><option value="had been issued">had been issued</option></select> on time last month, we <select name="q7.1.2"><option value="">--</option><option value="wouldn't be">wouldn't be</option><option value="wouldn't have been">wouldn't have been</option></select> behind schedule now.</div>
                    <div class="dropdown-question" data-correct-answer="Consequently,What is vital is">2. <select name="q7.2.1"><option value="">--</option><option value="Consequently">Consequently</option><option value="Herewith">Herewith</option><option value="Although">Although</option></select>, we have developed a revised timeline. <select name="q7.2.2"><option value="">--</option><option value="What is vital is">What is vital is</option><option value="What was vital is">What was vital is</option></select> that we communicate this new timeline to all partners immediately.</div>
                    <div class="dropdown-question" data-correct-answer="were to,could hire">3. If we <select name="q7.3.1"><option value="">--</option><option value="were to">were to</option><option value="would have">would have</option></select> receive additional funding now, we <select name="q7.3.2"><option value="">--</option><option value="could hire">could hire</option><option value="hired">hired</option></select> more staff to accelerate the work.</div>
                    <div class="dropdown-question" data-correct-answer="As per our discussion">4. The financial report is attached. <select name="q7.4.1"><option value="">--</option><option value="As per our discussion">As per our discussion</option><option value="Subsequently">Subsequently</option></select>, it outlines the budget reallocation needed to manage the delay.</div>
                </div>
            </section>

            <div id="submission-area">
                <button id="submit-assessment-btn" class="activity-btn">Submit Final Assessment</button>
            </div>
            <div id="submission-feedback"></div>
        </main>
    </div>

    <script>
    (function() {
        'use strict';
        const DURATION = 60 * 60; // 60 minutes
        const TOTAL_QUESTIONS = 30; // 1+5+5+6+5+4+4 = 30
        let timeRemaining = DURATION;
        let timerInterval = null;
        let studentId = '';
        let assessmentSubmitted = false;

        // Matching the working implementation from B2/exam.html
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwI1FuQM8gdwTSvU3FXVB7eX7EFoJCTWj0njCu2I6ibzCq2PtGQg_raW2gpocIVUuOviw/exec';


        const studentIdModal = document.getElementById('student-id-modal');
        const studentIdInput = document.getElementById('student-id-input');
        const startBtn = document.getElementById('start-assessment-btn');
        const assessmentContainer = document.querySelector('.assessment-container');
        const timerDisplay = document.getElementById('countdown-timer');
        const submitBtn = document.getElementById('submit-assessment-btn');

        // Step 1: Student Identification
        studentIdInput.addEventListener('input', () => {
            startBtn.disabled = !/^\d+$/.test(studentIdInput.value.trim());
        });
        startBtn.addEventListener('click', () => {
            studentId = studentIdInput.value.trim();
            studentIdModal.style.display = 'none';
            assessmentContainer.style.display = 'block';
            startTimer();
        });

        // Step 2: Timer Logic
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = '00:00';
                    handleSubmission(true); // Auto-submit
                }
            }, 1000);
        }

        const matchedPairClasses = ['matched-pair-1','matched-pair-2','matched-pair-3','matched-pair-4','matched-pair-5'];

        function resetContainer(container) {
            if (assessmentSubmitted) return;

            container.querySelectorAll('input[type="radio"]').forEach(input => {
                input.checked = false;
                input.disabled = false;
                const label = input.nextElementSibling;
                if (label) label.classList.remove('locked', 'feedback-correct', 'feedback-incorrect');
            });

            container.querySelectorAll('select').forEach(select => { select.value = ''; select.disabled = false; });
            container.querySelectorAll('.grammar-input, textarea').forEach(field => { field.value = ''; field.disabled = false; field.classList.remove('feedback-correct', 'feedback-incorrect'); });

            container.querySelectorAll('[data-activity-type="matching"]').forEach(activity => { activity.dataset.matchCounter = 1; });
            container.querySelectorAll('.matching-column li').forEach(li => {
                li.classList.remove('selected');
                matchedPairClasses.forEach(cls => li.classList.remove(cls));
                li.style.pointerEvents = '';
                delete li.dataset.userMatch;
            });

            container.querySelectorAll('.mc-option-label').forEach(label => label.classList.remove('feedback-correct', 'feedback-incorrect'));
        }

        function injectResetButtons() {
            document.querySelectorAll('.activity-card').forEach(card => {
                if (card.querySelector('.reset-btn')) return;
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'activity-btn reset-btn';
                btn.textContent = 'Reset Activity';
                btn.addEventListener('click', () => resetContainer(card));
                card.appendChild(btn);
            });

            document.querySelectorAll('.assessment-section').forEach(section => {
                const hasStandaloneQuestions = Array.from(section.querySelectorAll('.mc-question')).some(q => !q.closest('.activity-card'));
                if (!hasStandaloneQuestions) return;
                if (section.querySelector('.section-reset-btn')) return;
                const wrapper = document.createElement('div');
                wrapper.style.textAlign = 'right';
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'activity-btn reset-btn section-reset-btn';
                btn.textContent = 'Reset Section';
                btn.addEventListener('click', () => resetContainer(section));
                wrapper.appendChild(btn);
                section.appendChild(wrapper);
            });
        }

        injectResetButtons();

        // Matching Activity Logic
        let selectedMatchItem = null;
        const matchingActivities = document.querySelectorAll('[data-activity-type="matching"]');
        matchingActivities.forEach(activity => { activity.dataset.matchCounter = 1; });
        document.querySelectorAll('.matching-column li').forEach(item => {
            item.addEventListener('click', e => {
                if (assessmentSubmitted || e.currentTarget.style.pointerEvents === 'none') return;
                const currentItem = e.currentTarget;
                const currentColumn = currentItem.closest('.matching-column');
                if (currentItem.classList.contains('selected')) {
                    currentItem.classList.remove('selected');
                    selectedMatchItem = null;
                    return;
                }
                if (!selectedMatchItem) {
                    currentColumn.parentElement.querySelectorAll('li').forEach(li => li.classList.remove('selected'));
                    currentItem.classList.add('selected');
                    selectedMatchItem = currentItem;
                } else if (selectedMatchItem.closest('.matching-column') !== currentColumn) {
                    selectedMatchItem.dataset.userMatch = currentItem.dataset.matchId;
                    currentItem.dataset.userMatch = selectedMatchItem.dataset.matchId;
                    const activityCard = currentItem.closest('[data-activity-type="matching"]');
                    const matchNumber = activityCard.dataset.matchCounter;
                    const matchClass = `matched-pair-${matchNumber}`;
                    selectedMatchItem.classList.add(matchClass);
                    currentItem.classList.add(matchClass);
                    selectedMatchItem.style.pointerEvents = 'none';
                    currentItem.style.pointerEvents = 'none';
                    selectedMatchItem.classList.remove('selected');
                    activityCard.dataset.matchCounter = Math.min(6, parseInt(matchNumber, 10) + 1);
                    selectedMatchItem = null;
                }
            });
        });
        
        // Step 4: Submission Handling
        submitBtn.addEventListener('click', () => handleSubmission(false));
        
        function handleSubmission(isAutoSubmit) {
            if (assessmentSubmitted) return;
            assessmentSubmitted = true;
            clearInterval(timerInterval);

            if (!isAutoSubmit) {
                if (!confirm('Are you sure you want to submit your assessment?')) {
                    assessmentSubmitted = false;
                    startTimer(); // Resume timer if they cancel
                    return;
                }
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';

            const score = calculateScore();
            
            showFeedback(score, TOTAL_QUESTIONS);
            submitToGoogleSheet(studentId, 'C1', `${score}/${TOTAL_QUESTIONS}`);
        }

        function calculateScore() {
            let score = 0;
            // MCQs
            document.querySelectorAll('.mc-question[data-correct-answer]').forEach(q => { if (q.querySelector('input:checked')?.value === q.dataset.correctAnswer) score++; });
            
            // Dropdowns (single and multi)
            document.querySelectorAll('.dropdown-question').forEach(q => {
                const selects = q.querySelectorAll('select');
                if (selects.length === 1) {
                    if (selects[0].value === q.dataset.correctAnswer) score++;
                } else {
                    const correctAnswers = q.dataset.correctAnswer.split(',');
                    let allCorrect = true;
                    selects.forEach((sel, index) => {
                        if (sel.value !== correctAnswers[index]) {
                            allCorrect = false;
                        }
                    });
                    if (allCorrect) score++;
                }
            });

            // Matching
            document.querySelectorAll('#match-col-a li').forEach(item => { if (item.dataset.userMatch && item.dataset.matchId === item.dataset.userMatch) score++; });
            
            return score;
        }

        function submitToGoogleSheet(id, level, finalScore) {
            const formData = new FormData();
            formData.append('Student ID', id);
            formData.append('Level', level);
            formData.append('Score', finalScore);

            fetch(GOOGLE_SCRIPT_URL, { method: 'POST', body: formData, mode: 'no-cors' })
            .then(() => {
                console.log('Success: Submission data sent.');
                document.getElementById('submission-feedback').innerHTML += `<p>Your results have been successfully recorded.</p>`;
            })
            .catch(error => {
                console.error('Submission Error:', error);
                const feedbackEl = document.getElementById('submission-feedback');
                feedbackEl.classList.remove('success');
                feedbackEl.classList.add('error');
                feedbackEl.innerHTML += `<p>There was an error saving your results. Please contact your teacher.</p>`;
            });
        }
        
        function showFeedback(score, total) {
            const feedbackEl = document.getElementById('submission-feedback');
            feedbackEl.style.display = 'block';
            feedbackEl.classList.add('success');
            feedbackEl.innerHTML = `<h2>Assessment Complete!</h2><p>Your score is <strong>${score} / ${total}</strong>.</p>`;
            
            // MCQ Feedback
            document.querySelectorAll('.mc-question[data-correct-answer]').forEach(q => {
                q.querySelectorAll('.mc-option-item').forEach(item => {
                    const radio = item.querySelector('input');
                    const label = item.querySelector('label');
                    if (radio.value === q.dataset.correctAnswer) {
                        label.classList.add('feedback-correct');
                    } else if (radio.checked) {
                        label.classList.add('feedback-incorrect');
                    }
                });
            });

            // Dropdown Feedback
            document.querySelectorAll('.dropdown-question[data-correct-answer]').forEach(q => {
                const selects = q.querySelectorAll('select');
                if (selects.length === 1) {
                    if (selects[0].value === q.dataset.correctAnswer) {
                        selects[0].classList.add('feedback-correct');
                    } else {
                        selects[0].classList.add('feedback-incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-text';
                        correctAnswerSpan.textContent = `(Correct: ${q.dataset.correctAnswer})`;
                        q.appendChild(correctAnswerSpan);
                    }
                } else {
                    const correctAnswers = q.dataset.correctAnswer.split(',');
                    let allCorrect = true;
                    selects.forEach((sel, index) => {
                        if (sel.value === correctAnswers[index]) {
                            sel.classList.add('feedback-correct');
                        } else {
                            sel.classList.add('feedback-incorrect');
                            allCorrect = false;
                        }
                    });
                    if (!allCorrect) {
                         const correctAnswerSpan = document.createElement('span');
                         correctAnswerSpan.className = 'correct-answer-text';
                         correctAnswerSpan.textContent = `(Correct: ${correctAnswers.join(', ')})`;
                         q.appendChild(correctAnswerSpan);
                    }
                }
            });

            // Matching Feedback
            document.querySelectorAll('#match-col-a li').forEach(item => {
                if (item.dataset.userMatch && item.dataset.matchId === item.dataset.userMatch) {
                    item.classList.add('feedback-correct');
                    document.querySelector(`#match-col-b li[data-match-id='${item.dataset.userMatch}']`).classList.add('feedback-correct');
                } else if (item.dataset.userMatch) {
                    item.classList.add('feedback-incorrect');
                    document.querySelector(`#match-col-b li[data-match-id='${item.dataset.userMatch}']`).classList.add('feedback-incorrect');
                }
            });

            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    })();
    </script>
</body>
</html>
