<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#7A8471" />
  <title>Standalone Activity: Matching Personal Questions (4 Screens)</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Questrial&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ——— Theme tokens: warm, organic, stable ——— */
    :root {
      /* Palette */
      --primary-sage: #7A8471;
      --secondary-sage: #9CAF88;
      --tertiary-sage: #B8C5A6;
      --warm-cream: #F8F6F0;
      --soft-white: #FEFCF7;
      --forest-shadow: #5A6B52;
      --border-sage: rgba(122, 132, 113, 0.20);
      --hover-sage: rgba(156, 175, 136, 0.12);
      --focus-ring: color-mix(in oklab, var(--secondary-sage) 60%, white);

      /* Feedback */
      --correct-bg: #E8F5E9;
      --correct-border: #2E7D32;
      --incorrect-bg: #FFEBEE;
      --incorrect-border: #C62828;

      /* Richer, complementary match colors (no patterns) */
      --match-1-bg: #EABF86; /* richer amber */
      --match-1-border: #B8731F;
      --match-2-bg: #B8DAD3; /* deeper teal */
      --match-2-border: #2E7D73;
      --match-3-bg: #C6DFC0; /* forest green tint */
      --match-3-border: #3C8A42;
      --match-4-bg: #F0B5B5; /* clay rose */
      --match-4-border: #B63A3A;

      /* Type, radii, spacing */
      --font-display: 'Questrial', sans-serif;
      --font-body: 'Nunito', sans-serif;
      --leading: 1.6;
      --radius-md: 12px;
      --radius-xl: 20px;
      --radius-2xl: 28px;
      --space-4: 16px;
      --space-8: 32px;
      --space-12: 48px;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0; width: 100%; min-height: 100vh;
      color-scheme: light; font-family: var(--font-body);
      line-height: var(--leading); color: var(--forest-shadow);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
      background: var(--warm-cream);
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
    }
    body.feedback-open { overflow: hidden; }
    ::selection { background: color-mix(in oklab, var(--secondary-sage) 24%, white); color: var(--forest-shadow); }

    /* ——— Layout shells ——— */
    #app-wrapper {
      position: relative; display: flex; justify-content: center;
      align-items: flex-start; padding: var(--space-8); width: 100%;
      min-height: 100vh; box-sizing: border-box;
      padding-bottom: calc(var(--space-8) + env(safe-area-inset-bottom));
    }
    .activity-container {
      width: 100%; max-width: 900px; background: var(--soft-white);
      padding: var(--space-12); border-radius: var(--radius-2xl);
      border: 1px solid rgba(122, 132, 113, 0.12);
    }

    #activity-header { text-align: center; margin-bottom: 16px; }

    /* ——— Type scale ——— */
    h1 { font-family: var(--font-display); font-size: clamp(1.8rem, 1.6rem + 1.5vw, 2.4rem); color: var(--forest-shadow); margin: 0 0 2px 0; }
    h2.rubric { font-family: var(--font-body); font-size: clamp(1rem, 0.9rem + 0.5vw, 1.1rem); font-weight: 500; color: var(--secondary-sage); margin: 0; line-height: 1.5; }

    /* ——— Buttons ——— */
    .activity-btn { padding: 12px 20px; border-radius: var(--radius-md); border: 1px solid var(--primary-sage); background-color: var(--primary-sage); color: white; font-weight: 700; font-size: 1rem; cursor: pointer; user-select: none; -webkit-tap-highlight-color: transparent; transition: all 160ms ease-in-out; }
    .activity-btn:hover { background-color: var(--forest-shadow); transform: translateY(-1px); }
    .activity-btn:active { transform: translateY(0); }
    .activity-btn:disabled { background-color: var(--tertiary-sage); cursor: not-allowed; border-color: var(--tertiary-sage); transform: none; }
    .activity-btn.secondary { background-color: transparent; color: var(--primary-sage); border-color: var(--tertiary-sage); }
    .activity-btn.secondary:hover { background-color: var(--hover-sage); }

    .linking-controls { grid-column: 1 / -1; display: flex; gap: 12px; justify-content: center; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-sage); }

    /* ——— Screen nav (smooth progress bar) ——— */
    .screen-nav { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin-bottom: 12px; }
    .progress { flex: 1; }
    .progress-track { position: relative; width: 100%; height: 10px; background: var(--warm-cream); border: 1px solid var(--border-sage); border-radius: 999px; overflow: hidden; }
    .progress-fill { position: absolute; left: 0; top: 0; height: 100%; width: 25%; background: var(--primary-sage); transition: width 280ms ease; }

    /* ——— Matching Activity Styles ——— */
    .slide-content-wrapper { display: flex; flex-direction: column; min-height: 420px; }
    .linking-container { display: grid; grid-template-columns: 1fr; gap: 16px; margin-bottom: 24px; }
    .link-column { display: flex; flex-direction: column; gap: 12px; }
    .linking-item { position: relative; background-color: var(--warm-cream); border-radius: var(--radius-md); display: flex; align-items: center; border: 2px solid var(--border-sage); min-height: 56px; padding: 10px 16px; cursor: pointer; transition: background-color 200ms ease-in-out, border-color 200ms ease-in-out, transform 80ms ease-in-out; -webkit-tap-highlight-color: transparent; }
    .linking-item:focus-visible { outline: 3px solid var(--focus-ring); outline-offset: 3px; }
    .linking-item-text { flex-grow: 1; text-align: left; pointer-events: none; user-select: none; -webkit-user-select: none; color: var(--forest-shadow); font-weight: 600; font-size: clamp(0.95rem, 0.9rem + 0.3vw, 1.05rem); }
    .linking-item.linking-active { border-color: var(--primary-sage); box-shadow: 0 0 0 3px var(--hover-sage); }

    /* Colorblind-friendly: darker colors + letter badges (no patterns) */
    .match-1 { background-color: var(--match-1-bg); border-color: var(--match-1-border); }
    .match-2 { background-color: var(--match-2-bg); border-color: var(--match-2-border); }
    .match-3 { background-color: var(--match-3-bg); border-color: var(--match-3-border); }
    .match-4 { background-color: var(--match-4-bg); border-color: var(--match-4-border); }

    .pair-badge { position: absolute; right: 8px; top: 8px; font-weight: 800; font-size: 0.85rem; line-height: 1; padding: 2px 6px; border-radius: 8px; background: rgba(0,0,0,0.08); color: #1f1f1f; }

    /* ——— Feedback Sidebar ——— */
    #feedback-sidebar-container { padding: 24px; box-shadow: -4px 0 16px rgba(0,0,0,0.1); background: white; position: fixed; top: 0; right: -400px; width: 100%; max-width: 380px; height: 100%; transition: right 0.4s ease; z-index: 100; }
    .feedback-header { padding-bottom: 12px; border-bottom: 1px solid var(--border-sage); }
    #feedback-details { overflow-y: auto; height: calc(100% - 150px); }
    .feedback-footer { text-align: center; padding-top: 20px; }
    .feedback-detail-item { border-left: 4px solid var(--incorrect-border); padding: 12px; margin-bottom: 12px; background-color: #fafafa; }
    .feedback-detail-item.correct { border-left-color: var(--correct-border); }

    /* ——— Desktop ——— */
    @media (min-width: 600px) {
      .linking-container { grid-template-columns: 1fr 1fr; gap: 24px; }
    }
    /* ——— Mobile ——— */
    @media (max-width: 600px) {
      #app-wrapper { padding: var(--space-4); }
      .activity-container { padding: var(--space-8); }
      .link-column.left { margin-bottom: var(--space-8); }
    }

    /* ——— Animations (click pulse + sparkles) ——— */
    @keyframes pulseRing { 0% { box-shadow: 0 0 0 0 rgba(122,132,113,0.25); } 100% { box-shadow: 0 0 0 18px rgba(122,132,113,0); } }
    .click-pulse { animation: pulseRing 600ms ease-out; }

    .sparkle { position: absolute; width: 6px; height: 6px; border-radius: 50%; background: currentColor; opacity: 0.85; pointer-events: none; }
    @keyframes sparklePop { from { transform: translate(var(--sx), var(--sy)) scale(0.3); opacity: 0.9; } to { transform: translate(calc(var(--sx) * 2.2), calc(var(--sy) * 2.2)) scale(0); opacity: 0; } }
    .sparkle { animation: sparklePop 500ms ease-out forwards; }

    @media (prefers-reduced-motion: reduce) {
      .click-pulse { animation: none; }
      .sparkle { display: none; }
      .linking-item { transition: none; }
      #feedback-sidebar-container { transition: none; }
    }

    /* Visually hidden utility */
    .sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; }

    /* Screen switching */
    .screen { display: none; }
    .screen[aria-hidden="false"] { display: block; }
  </style>
</head>
<body>

<div id="app-wrapper">
  <div class="activity-container">
    <div id="activity-header">
      <div id="activity-titles">
        <h1>Getting Personal Details</h1>
        <h2 class="rubric">Match the question with the correct answer.</h2>
      </div>
    </div>

    <!-- Screen navigation: smooth loading bar -->
    <div class="screen-nav" aria-label="Screens">
      <button id="prev-screen" class="activity-btn secondary" aria-label="Previous screen">Prev</button>
      <div class="progress" aria-hidden="false">
        <div class="progress-track" role="progressbar" aria-valuemin="1" aria-valuemax="4" aria-valuenow="1">
          <div class="progress-fill"></div>
        </div>
      </div>
      <button id="next-screen" class="activity-btn secondary" aria-label="Next screen">Next</button>
    </div>

    <!-- ===== Screens (4 total) ===== -->

    <!-- Screen 1 -->
    <section id="screen-1" class="screen" aria-hidden="false">
      <div class="slide-content-wrapper">
        <div class="linking-container">
          <!-- Left Column -->
          <div class="link-column left">
            <div class="linking-item" data-link-id="L1" data-explanation="Use 'What's your name?' to ask for a person's name." role="button" tabindex="0">
              <div class="linking-item-text">What's your name?</div>
            </div>
            <div class="linking-item" data-link-id="L2" data-explanation="Use 'Where are you from?' to ask for a country or city." role="button" tabindex="0">
              <div class="linking-item-text">Where are you from?</div>
            </div>
            <div class="linking-item" data-link-id="L3" data-explanation="Use 'What's your email address?' to ask for an email with an '@' symbol." role="button" tabindex="0">
              <div class="linking-item-text">What's your email address?</div>
            </div>
          </div>
          <!-- Right Column -->
          <div class="link-column right">
            <div class="linking-item" data-link-id="R1" role="button" tabindex="0"><div class="linking-item-text">Egypt</div></div>
            <div class="linking-item" data-link-id="R2" role="button" tabindex="0"><div class="linking-item-text">yousef11@email.com</div></div>
            <div class="linking-item" data-link-id="R3" role="button" tabindex="0"><div class="linking-item-text">Yousef</div></div>
          </div>
          <!-- Controls -->
          <div class="linking-controls">
            <button class="undo-btn activity-btn secondary" aria-label="Undo last match">Undo</button>
            <button class="reset-btn activity-btn secondary">Reset</button>
            <button class="check-btn activity-btn">Check</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Screen 2 -->
    <section id="screen-2" class="screen" aria-hidden="true">
